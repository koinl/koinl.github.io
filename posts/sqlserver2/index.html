<!DOCTYPE html>
<html lang="zh-CN">
<!-- 
    你好~ 欢迎来到我的乐园。下面就简单介绍下我的 body 部分。
    body 标签，主要是由加载 loading 与应用 app 所组成。
        - loading 加载页面。顾名思义，这里不做详细叙述。
        - app 中，分为头部部分 header、封面部分 cover、主体部分 main 和尾部部分 footer。
            - header、cover、footer 你可以分别在页面最上方，页面的中上方、页面的最下方找到。
                > 文章页找不到 cover、主页找不到 header 与 cover...还有什么页找不到什么？
            - main 中，有初始/列表页、文章页、主页、搜索页、友链页，错误页。
                - 初始/列表页在进入网站后即可看见。
                - 文章页需要点击文章后进入。
                - 让你有搜索内容需求时，可以进入搜索页。
                - 与其他人的交互，则尽在友链页。
                - 另外，我还新创建了主页，欢迎观看。
                - 最后，当你进入了不存在的页面时，就会出现错误页。
    祝你阅读愉快！ 
-->
<head>
    <title>『SQL Server』考二 | 锦鲤未离</title>
    <meta name="keywords" content="SqlServer">
    <meta charset="utf-8">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="Koi_NL">
    <meta name="generator" content="Hexo 6.1.0">
    <meta name="HandheldFriendly" content="True">
    <meta name="force-rendering" content="webkit">
    <meta name="author" content="Koi_NL,1099771017@qq.com"> 
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="mask-icon" href="/img/icon.png">
    <link rel="shortcut icon" href="/img/icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/icon.png">
    <link rel="canonical" href="http://example.com/posts/sqlserver2/">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/dark.css">
    <link rel="stylesheet" id="hl-default-theme" href="/css/hlight-main.css" media="none">
    <link rel="stylesheet" id="hl-dark-theme" href="/css/hlight-dark.css" media="none">
    
    <script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>

<body>
    <div class="loading"><span></span><span></span><span></span><span></span><span></span></div>
    <script>document.onreadystatechange=function(){console.log(document.readyState);if(document.readyState=="complete"){$(".loading").fadeOut();}}</script>

    <div id="app">
<header class="header">
    <div class="header__left"><a href="/" class="button" title="回到首页">
            <svg t="1662257077921" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="9718" width="27" height="27">
                <path
        d="M1017.295381 515.625294c-8.918711 9.05797-23.377057 9.05797-32.295768 0L755.083237 303.3395c-1.513416-1.206227-2.807704-2.525091-3.989357-4.056938l-89.551638-90.944226c-1.513416-1.200084-2.807704-2.512803-3.989357-4.050794L512.000756 56.462215 38.999851 515.625294c-8.918711 9.05797-23.377057 9.05797-32.29372 0-8.918711-9.05797-8.918711-23.73954 0-32.797509L493.065647 10.095158c0.77002-1.130454 1.234898-2.394024 2.224046-3.405698 4.603734-4.677459 10.67583-6.829828 16.711063-6.682377 6.033185-0.147451 12.105281 2.004918 16.709015 6.682377 0.989147 1.011675 1.454026 2.275244 2.224046 3.405698l121.376383 123.262521L652.3102 71.16836c0 0-0.002048 0-0.002048-0.006144 0-13.114908 10.471037-23.751827 23.385249-23.751827l93.538947 0c6.459154 0 12.305978 2.660254 16.536989 6.952703 4.23306 4.298593 6.850307 10.24167 6.850307 16.799124l0 204.700282 224.675737 206.965287C1026.212043 491.885755 1026.212043 506.567325 1017.295381 515.625294zM745.851194 94.907899l-46.770497 0 0 85.959578 46.770497 47.491367L745.851194 94.907899zM163.72459 474.910509c12.916259 0 23.385249 10.630776 23.385249 23.745683l0 430.348784c0 26.235959 20.940027 47.49751 46.770497 47.49751l161.196225 0-0.002048 0L395.074513 688.656474c0-13.121052 10.471037-23.751827 23.385249-23.751827l187.079941 0c12.916259 0 23.385249 10.630776 23.385249 23.751827l0 287.846013-0.002048 0 161.196225 0c25.83047 0 46.768449-21.261551 46.768449-47.49751l-0.002048-430.348784c0-13.114908 10.468989-23.745683 23.385249-23.745683 12.914211 0 23.385249 10.630776 23.385249 23.745683l0 430.348784c0 52.469871-41.878006 94.995021-93.538947 94.995021L233.880336 1023.999997c-51.660941 0-93.538947-42.52515-93.538947-94.995021L140.34139 498.656193C140.34139 485.541285 150.810379 474.910509 163.72459 474.910509zM582.154454 976.502487l0-264.100329-140.309444 0 0 264.100329-0.002048 0L582.154454 976.502487 582.154454 976.502487z"
        p-id="44080" fill="#999"></path>
            </svg>
        </a></div>
    <div class="header__right"><a href="javaScript:void(0);" id="btn-toggle-dark" title="夜间模式">
            <svg t="1662256981531" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="8697" width="30" height="30">
                <path d="M89.85 197.55m-26.03 0a26.03 26.03 0 1 0 52.06 0 26.03 26.03 0 1 0-52.06 0Z" fill="#999"
                    opacity=".8" p-id="34043"></path>
                <path d="M135.4 99.52m-26.03 0a26.03 26.03 0 1 0 52.06 0 26.03 26.03 0 1 0-52.06 0Z" fill="#999"
                    opacity=".8" p-id="34044"></path>
                <path d="M934.15 145.07m-26.03 0a26.03 26.03 0 1 0 52.06 0 26.03 26.03 0 1 0-52.06 0Z" fill="#999"
                    opacity=".8" p-id="34045"></path>
                <path d="M612.93 189.8V194.82h0.51c2.42 15.26 15.54 26.96 31.48 26.96h196.21c15.94 0 29.05-11.7 31.48-26.96h0.5v-15.45c0-17.67-14.31-31.98-31.98-31.98H644.91c-17.66 0-31.99 14.32-31.99 31.98v10.43zM619.43 411.04V416.06h0.51c2.42 15.26 15.54 26.96 31.48 26.96h196.21c15.94 0 29.05-11.7 31.48-26.96h0.5v-15.45c0-17.67-14.31-31.98-31.98-31.98H651.42c-17.66 0-31.99 14.32-31.99 31.98v10.43z"
                    fill="#999" opacity=".8" p-id="34046"></path>
                <path d="M632.26 430.79c0.01 0 0.01 0.01 0.03 0.02l3.25 3.78 0.39-0.33c11.79 10 29.36 10.31 41.45-0.09l178.53-217.51c12.09-10.39 14.4-27.81 6.28-40.97l0.38-0.32-3.27-3.81-5.83-6.77-0.97-1.13c-11.52-13.4-31.7-14.91-45.1-3.39L628.86 377.78c-13.39 11.51-14.91 31.72-3.39 45.11l0.97 1.13 5.82 6.77z"
                    fill="#999" opacity=".8" p-id="34047"></path>
                <path d="M511.94 950.5c-233.06 0-422.66-189.65-422.66-422.75 0-190.41 128.42-358.05 312.31-407.65 13.22-3.52 27.25 1.33 35.41 12.34 8.14 11.01 8.71 25.88 1.42 37.47-31.43 50.03-48.04 107.45-48.04 166.05 0 172.59 140.48 313.02 313.17 313.02 58.73 0 116.22-16.67 166.28-48.23a33.279 33.279 0 0 1 37.49 1.37 33.281 33.281 0 0 1 12.37 35.4C870.16 821.8 702.49 950.5 511.94 950.5zM344.17 213.93C230.3 274.77 155.8 394.66 155.8 527.76c0 196.42 159.76 356.22 356.13 356.22 133.25 0 253.21-74.72 314-188.92a376.765 376.765 0 0 1-122.39 20.44c-209.36 0-379.7-170.26-379.7-379.53 0.01-41.53 6.87-82.76 20.33-122.04z m0 0"
                    fill="#999" opacity=".8" p-id="34048"></path>
            </svg>
        </a></div>
    <script>(() => { const rootElement = document.documentElement; const darkModeStorageKey = 'user-color-scheme'; const darkModeMediaQueryKey = '--color-mode'; const rootElementDarkModeAttributeName = 'data-user-color-scheme'; const setLS = (k, v) => { try { localStorage.setItem(k, v); } catch (e) { } }; const removeLS = (k) => { try { localStorage.removeItem(k); } catch (e) { } }; const getLS = (k) => { try { return localStorage.getItem(k); } catch (e) { return null; } }; const getModeFromCSSMediaQuery = () => { const res = getComputedStyle(rootElement).getPropertyValue(darkModeMediaQueryKey); if (res.length) return res.replace(/["'\s]/g, ''); return res === 'dark' ? 'dark' : 'light'; }; const resetRootDarkModeAttributeAndLS = () => { rootElement.removeAttribute(rootElementDarkModeAttributeName); removeLS(darkModeStorageKey); }; const validColorModeKeys = { dark: true, light: true, }; const applyCustomDarkModeSettings = (mode) => { const currentSetting = mode || getLS(darkModeStorageKey); if (document.getElementById('hl-dark-theme')) { if (validColorModeKeys[currentSetting]) { if (currentSetting === 'dark') { document.getElementById('hl-default-theme').media = 'none'; document.getElementById('hl-dark-theme').media = 'all'; } else { document.getElementById('hl-dark-theme').media = 'none'; document.getElementById('hl-default-theme').media = 'all'; } } else { if (getModeFromCSSMediaQuery() === 'dark') { document.getElementById('hl-default-theme').media = 'none'; document.getElementById('hl-dark-theme').media = 'all'; } else { document.getElementById('hl-dark-theme').media = 'none'; document.getElementById('hl-default-theme').media = 'all'; } } } else if (document.getElementById('hl-default-theme')) { document.getElementById('hl-default-theme').media = 'all'; } if (currentSetting === getModeFromCSSMediaQuery()) { resetRootDarkModeAttributeAndLS(); } else if (validColorModeKeys[currentSetting]) { rootElement.setAttribute(rootElementDarkModeAttributeName, currentSetting); } else { resetRootDarkModeAttributeAndLS(); } }; const invertDarkModeObj = { dark: 'light', light: 'dark', }; const toggleCustomDarkMode = () => { var currentSetting = getLS(darkModeStorageKey); if (validColorModeKeys[currentSetting]) { currentSetting = invertDarkModeObj[currentSetting]; } else if (currentSetting === null) { currentSetting = invertDarkModeObj[getModeFromCSSMediaQuery()]; } else { return; } setLS(darkModeStorageKey, currentSetting); return currentSetting; }; applyCustomDarkModeSettings(); window.onload = () => { const darkModeToggleBottonElement = document.getElementById('btn-toggle-dark'); darkModeToggleBottonElement.addEventListener('click', () => { applyCustomDarkModeSettings(toggleCustomDarkMode()); }); }; })();</script>
</header>


        <div class="cover">
            <div class="cover__logo">
                <div class="carousel" id="carousel_main">
                    <ul id="div_img">
                        <li class="every_img"><img src="/img/cover/LunBoTu/home_welcome.jpg" id="link_img" onClick="link('https://koinl.github.io/page_home/', '_self')" alt="" title="" /></li>
                        <li class="every_img"><img src="/img/cover/LunBoTu/Picture_APP_By_KoiNL.jpg" id="link_img" onClick="link('https://koinl.github.io/apk/APP_By_KoiNL.apk', '_self')" alt="" title="" /></li>
                        <li class="every_img"><img src="/img/cover/LunBoTu/new_blog_theme.jpg" id="link_img" onClick="link('https://koinl.github.io/', '_self')" alt="" title="" /></li>
                        <li class="every_img"><img src="/img/test/test4.jpg" id="link_img" onClick="link('https://www.qidian.com/', '_self')" alt="" title="" /></li>
                        <li class="every_img"><img src="/img/test/test5.jpg" id="link_img" onClick="link('https://www.csdn.net/', '_self')" alt="" title="" /></li>
                    </ul>
                    <ul class="div_circle"><li class = every_circle></li><li class = every_circle></li><li class = every_circle></li><li class = every_circle></li><li class = every_circle></li></ul>
                    <div class="btn left"><p class="btn_p">《&nbsp</p></div><div class="btn right"><p class="btn_p">&nbsp》</p></div>
                </div><script type="text/javascript"> $(function (){ var max_num=4; var time_stop=4250; var time_swap=1250; var num =0; var chosen_circle_color="#0aa1ed"; var chosen_not_circle_color="#ffffff"; function every_thing(){$("#div_img").animate({left:-$(".every_img").eq(0).width()*num},time_swap); $(".every_circle").eq(num).css("background",chosen_circle_color) .siblings('li').css("background",chosen_not_circle_color);} function Right_move(){if(num>=max_num){num=0;}else{num++;}every_thing();} function Left_move(){if(num===0){num=max_num;}else{num--;}every_thing();} $(".every_circle").eq(0).css("background",chosen_circle_color); $("#div_img").width($('.every_img').length*$('.every_img').eq(0).width()); var id =setInterval(Right_move,time_stop); $("#carousel_main").mouseover(function (){clearInterval(id)}); $("#carousel_main").mouseout(function (){id=setInterval(Right_move,time_stop);}); $(".left").click(function (){ $("#div_img").stop(); Left_move(); }); $(".right").click(function (){ $("#div_img").stop(); Right_move(); }); $(".every_circle").mouseover(function (){num =$(this).index(); $("#div_img").stop(); every_thing();}); }); function link(jinliweili_Url, quality_target){window.open(jinliweili_Url,quality_target);}</script>
            </div>
            <div class="cover__desc">
                <div class='avator_logo_link'><img alt="離.png" src="/img/avator.png"></div>
                <div class="desc-com"><div class="desc-button"><div class="desc-box">是</div><div class="desc-box">锦</div><div class="desc-box">鲤</div><div class="desc-box">未</div><div class="desc-box">离</div></div></div>
                <button class="btn-cssbuttons">
                    <span class="btn-cssbuttons-span">
                        <svg t="1662258197467" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="31880" width="18" height="18"><path d="M512 164.7c12.9 0 25.9 0.7 39.1 2.1 163.3 17.9 294.5 153.8 307 317.6 5.4 71.2-10.4 138-42.2 195.2-15.8 28.4-13.8 63.3 2.4 91.4l27.5 47.5c10.4 18-2.6 40.4-23.3 40.4h-286l0.7-1c-8.4 0.7-16.8 1-25.1 1-23.3 0-46.5-2.6-69.8-7.6C300.1 820.5 187.4 704 168 559.9c-28.5-213 136.5-395.1 344-395.2m0-100.5c-129.1 0-251.9 55.8-337 153-85 97.2-123.8 226.9-106.5 356 24.8 184.7 166.4 336 352.4 376.4 30.3 6.6 61 9.9 91.2 9.9 5.5 0 11-0.1 16.4-0.3 2.7 0.2 5.3 0.3 8 0.3h286c45.4 0 87.7-24.4 110.4-63.8 22.7-39.3 22.7-88.2-0.1-127.5L906.7 723c40.4-75 58.2-160 51.6-246.3C942.3 266.1 771.9 89.9 562 67c-16.6-1.9-33.4-2.8-50-2.8z" p-id="31881" fill="#999"></path><path d="M331.4 511.9m-50.3 0a50.3 50.3 0 1 0 100.6 0 50.3 50.3 0 1 0-100.6 0Z" p-id="31882" fill="#999"></path><path d="M512 511.9m-50.3 0a50.3 50.3 0 1 0 100.6 0 50.3 50.3 0 1 0-100.6 0Z" p-id="31883" fill="#999"></path><path d="M692.6 511.9m-50.3 0a50.3 50.3 0 1 0 100.6 0 50.3 50.3 0 1 0-100.6 0Z" p-id="31884" fill="#999"></path></svg>
                    </span>
                    <span>　　　　</span>
                    <ul>
                        <li id="WeChat"><a href="/img/cover/btn-cssbuttons-span/WeChat.jpg" title="WeChat" target="_blank"><svg height="18" width="18" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1024 1024" class="icon"> <path d="M676.325 381.17h5.098c-25.972-114.081-144.421-200.37-286.538-200.37-161.17 0-291.877 110.804-291.877 247.581 0 79.493 44.176 150.247 112.867 195.516l-28.884 85.925 101.702-50.486-1.942-0.971c33.497 11.286 69.905 17.598 108.134 17.598 8.617 0 17.234-0.364 25.729-0.971-7.646-21.117-11.893-43.691-11.893-66.992 0-125.125 119.786-226.828 267.605-226.828zM489.184 319.276c21.482 0 38.836 15.292 38.836 34.102 0 14.563-10.437 27.065-25.122 31.918-4.247 1.456-8.86 2.185-13.714 2.185-21.482 0-38.836-15.292-38.836-34.102s17.476-34.102 38.836-34.102zM315.634 385.419c-4.247 1.456-8.86 2.185-13.714 2.185-21.482 0-38.836-15.292-38.836-34.102s17.355-34.102 38.836-34.102 38.836 15.292 38.836 34.102c0 14.563-10.437 27.065-25.122 31.918z" fill="#999999" p-id="3256"></path> <path d="M922.45 608.241c0-115.295-110.197-208.865-246.124-208.865s-246.124 93.45-246.124 208.865 110.197 208.865 246.124 208.865c30.462 0 59.711-4.733 86.774-13.349l78.279 42.962-21.117-69.177c61.895-37.866 102.188-99.638 102.188-169.301zM610.546 570.254c-3.519 1.214-7.404 1.821-11.408 1.821-17.962 0-32.526-12.865-32.526-28.641s14.563-28.641 32.526-28.641 32.526 12.865 32.526 28.641c0 12.257-8.738 22.695-21.117 26.821zM769.897 570.254c-3.519 1.214-7.404 1.821-11.408 1.821-17.962 0-32.526-12.865-32.526-28.641s14.563-28.641 32.526-28.641 32.526 12.865 32.526 28.641c0 12.257-8.738 22.695-21.117 26.821z" fill="#999999" p-id="3257"></path> </svg></a></li>
                        <li id="Telegram"><a href="/img/cover/btn-cssbuttons-span/Telegram.jpg" title="Telegram" target="_blank"><svg height="18" width="18" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1024 1024" class="icon"> <path d="M417.28 795.733333l11.946667-180.48 327.68-295.253333c14.506667-13.226667-2.986667-19.626667-22.186667-8.106667L330.24 567.466667 155.306667 512c-37.546667-10.666667-37.973333-36.693333 8.533333-55.466667l681.386667-262.826666c31.146667-14.08 61.013333 7.68 49.066666 55.466666l-116.053333 546.56c-8.106667 38.826667-31.573333 48.213333-64 30.293334L537.6 695.466667l-84.906667 82.346666c-9.813333 9.813333-17.92 17.92-35.413333 17.92z" fill="#999999"></path></svg></a></li>
                        <li id="E-mail"><a href="/img/cover/btn-cssbuttons-span/G-mail.jpg" title="G-mail" target="_blank"><svg height="18" width="18" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1024 1024" class="icon"> <path d="M134 297.4c22 11.6 327.6 178.2 339 184.2 11.4 6 23 8.8 41 8.8 18 0 29.6-2.8 41-8.8 11.4-6 317-172.6 339-184.2 8.2-4.2 22-11.8 25-20.4 5.2-15.2-0.4-21-22.6-21L514 256 131.6 256c-22.2 0-27.8 6-22.6 21C112 285.8 125.8 293.2 134 297.4z" p-id="5247" fill="#999"></path> <path d="M911.4 306.4c-16.4 8.4-163.6 113.2-261 176.2l164.4 185c4 4 5.8 8.8 3.6 11.2-2.4 2.2-7.6 1-11.8-2.8l-197.2-166.4c-29.8 19.2-50.8 32.4-54.4 34.4-15.4 7.8-26.2 8.8-41 8.8-14.8 0-25.6-1-41-8.8-3.8-2-24.6-15.2-54.4-34.4l-197.2 166.4c-4 4-9.4 5.2-11.8 2.8-2.4-2.2-0.6-7.2 3.4-11.2l164.2-185c-97.4-63-246.2-167.8-262.6-176.2-17.6-9-18.6 1.6-18.6 9.8 0 8.2 0 410 0 410 0 18.6 27.4 41.8 47 41.8L514 768l371 0c19.6 0 43-23.4 43-41.8 0 0 0-402 0-410C928 307.8 929.2 297.4 911.4 306.4z" p-id="5248" fill="#999"></path></svg></a></li>
                        <li id="Github">
                            <a href="https://github.com/koinl" title="Github" target="_blank">
                                <svg height="13" width="18" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1024 1024" class="icon">
                                    <path d="M855.557 216.855c35.621-66.153-5.089-152.661-5.089-152.661-91.597 0-157.75 61.064-157.75 61.064-35.621-20.355-152.661-20.355-152.661-20.355s-117.04 0-152.661 20.355c0 0-66.153-61.064-157.75-61.064 0 0-40.71 86.508-5.089 152.661 0 0-81.419 76.331-50.887 239.169 28.691 153.018 162.838 193.371 249.346 193.371 0 0-35.621 30.532-30.532 81.419 0 0-50.887 30.532-101.774 10.177s-76.331-71.242-76.331-71.242-50.887-66.153-101.774-40.71c0 0-15.266 15.266 40.71 40.71 0 0 40.71 61.064 55.976 96.685 15.266 35.621 96.685 66.153 178.105 45.798v117.04s0 10.177-20.355 15.266-20.355 15.266-10.177 15.266H723.25c10.177 0 10.177-10.177-10.177-15.266-20.355-5.089-20.355-15.266-20.355-15.266v-117.04s0.447-61.03 0-81.419c-1.119-51.128-35.621-81.419-35.621-81.419 86.508 0 220.655-40.353 249.346-193.371 30.533-162.837-50.886-239.168-50.886-239.168z" p-id="3872" fill="#999999"></path>
                                </svg>
                            </a>
                        </li>
                    </ul>
                </button>
            </div>
            <div class="cover__intro">
                <details>
                    <summary>
                        <a href="/page_home/" target="_self"><button>主页</button></a> 
                        <a href="/" target="_self"><button>首页</button></a> 
                        <a href="/page_search/" target="_self"><button>搜索页</button></a> 
                        <a href="/page_friends/" target="_self"><button>友链页</button></a> 
                        <p title="打开分类">分类流</p>
                    </summary>
                    <div class="fold-content">
                        <div class="dropdown-menus" id="dropdown-menus"> • 分类 • 
                            <a href="/categories/Python/" class="dropdown-menu button">Python</a> • 
                            <a href="/categories/Linux/" class="dropdown-menu button">Linux</a> • 
                            <a href="/categories/Data-Structure-and-Algorithm/" class="dropdown-menu button">数据结构与算法</a> • 
                            <a href="/categories/SqlServer/" class="dropdown-menu button">SQL Server</a> • 
                            <a href="/categories/MATLAB/" class="dropdown-menu button">MATLAB</a> • 
                            <a href="/categories/java/" class="dropdown-menu button">Java</a> • 
                        </div>
                    </div>
                </details>
            </div>
        </div>
<!-- 我们是__应用部分！我是__文章部分！ -->
        <main class="main POST">
            <!-- 一、上·位置 --><style>.cover {clip-path: circle(0); max-width: 1px; max-height: 1px; min-height: 0; margin: 0; line-height: 0;}</style>
            <div class="post-title">
                <!-- 1. 文章标题 -->
                <h1 class="post-title__text">『SQL Server』考二</h1>
                <!-- 2. 时间与类别 -->
                <div class="post-title__meta">
                    <p>创建于  2022-07-18 19:08:39 星期一 · </p>
                    <a href="/categories/SqlServer/" class="button">SqlServer</a>
                </div>
            </div>
            <!-- 二、右·位置 -->
            <aside class="post-side">
                <!-- 1. 文章目录 -->
                <div class="post-side__toc">
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E5%A5%97"><span class="toc-text">第一套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%A5%97"><span class="toc-text">第二套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E5%A5%97"><span class="toc-text">第三套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E5%A5%97"><span class="toc-text">第五套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E5%A5%97"><span class="toc-text">第七套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A1%A2-%E6%B4%A2"><span class="toc-text">??????????????????????????????????????塢?????????????????? ?洢????</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E5%A5%97"><span class="toc-text">第二十套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B4%A2"><span class="toc-text">?????????????? ????????洢????</span></a></li></ol>
                </div>
            </aside>
            <!-- 2. 小界面目录图标 -->
            <a class="btn-toc button" id="btn-toc" tabindex="0">
                <svg t="1662257293901" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="29423" width="55" height="55">
                    <path d="M480 64C214.848 64 0 278.848 0 544S214.848 1024 480 1024 960 809.152 960 544 745.152 64 480 64zM288 768C270.336 768 256 753.664 256 736S270.336 704 288 704 320 718.336 320 736 305.664 768 288 768zM288 576C270.336 576 256 561.664 256 544S270.336 512 288 512 320 526.336 320 544 305.664 576 288 576zM288 384C270.336 384 256 369.664 256 352S270.336 320 288 320 320 334.336 320 352 305.664 384 288 384zM672 768l-256 0C398.336 768 384 753.664 384 736S398.336 704 416 704l256 0c17.664 0 32 14.336 32 32S689.664 768 672 768zM672 576l-256 0C398.336 576 384 561.664 384 544S398.336 512 416 512l256 0C689.664 512 704 526.336 704 544S689.664 576 672 576zM672 384l-256 0C398.336 384 384 369.664 384 352S398.336 320 416 320l256 0C689.664 320 704 334.336 704 352S689.664 384 672 384z" p-id="43077" fill="#bfbfbf"></path>
            </svg>
            </a>
            <!-- 3. 小界面目录流 -->
            <div class="toc-menus" id="toc-menus">
                <div class="toc-title">
                    文章目录
                </div>
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E5%A5%97"><span class="toc-text">第一套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%A5%97"><span class="toc-text">第二套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E5%A5%97"><span class="toc-text">第三套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E5%A5%97"><span class="toc-text">第五套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E5%A5%97"><span class="toc-text">第七套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A1%A2-%E6%B4%A2"><span class="toc-text">??????????????????????????????????????塢?????????????????? ?洢????</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E5%A5%97"><span class="toc-text">第二十套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B4%A2"><span class="toc-text">?????????????? ????????洢????</span></a></li></ol>
            </div>
            <!-- 三、中·正文 -->
            <article class="post post__with-toc content-card">
                <!-- 1. 正文缩略图 -->
                <div class="post__header">
                </div>
                <!-- 2. 正文目录 -->
                <div class="wenzhangmulu">文章目录</div>
                <div class="post-side__toc" style="padding-left: 35px;font-style: oblique;line-height: 2.5;">
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E5%A5%97"><span class="toc-text">第一套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%A5%97"><span class="toc-text">第二套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E5%A5%97"><span class="toc-text">第三套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E5%A5%97"><span class="toc-text">第五套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E5%A5%97"><span class="toc-text">第七套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A1%A2-%E6%B4%A2"><span class="toc-text">??????????????????????????????????????塢?????????????????? ?洢????</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E5%A5%97"><span class="toc-text">第二十套</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B4%A2"><span class="toc-text">?????????????? ????????洢????</span></a></li></ol>
                </div>
                <!-- 3. 正文文章 -->
                <div class="post__content">
                    <p>没有8，9，至10（含）</p>
<h2 id="第一套"><a href="#第一套" class="headerlink" title="第一套"></a>第一套</h2><p>商品表（商品号，商品名，单价）<br>销售表（销售单据号，商品号，销售时间，销售数量，销售单价）。<br>商品号，单价，销售数量，销售单价均为整型<br>请编写查询某年某商品的销售总毛利的存储过程，毛利&#x3D;销售数量<em>（销售单价-单价）<br>要求商品号和年份为输入参数，总毛利用输出参数返回。<br>CREATE PROC p_name @商品号 int,@年份 int,@毛利 int output<br>AS<br>DECLARE @销售量 int,@单价 int,@销售单价 int<br>BEGIN<br>SELECT @单价 &#x3D; 单价 FROM 商品表 WHERE 商品号&#x3D;@商品号<br>SELECT @销售单价&#x3D; 销售单价, @销售量&#x3D; sum(销售数量)FROM 销售表 WHERE<br>@商品号&#x3D;商品号 AND 销售时间&#x3D;@年份<br>IF @单价 IS NULL THEN  &#x2F;<em>有？</em>&#x2F;<br>  ROLLBACK;<br>  RETURN;<br>END IF<br>IF @销售单价 IS NULL THEN&#x2F;<em>卖？</em>&#x2F;<br>  ROLLBACK;<br>  RETURN;<br>END IF<br>SET @毛利&#x3D;(@销售单价-@单价)</em>@销售量<br>end</p>
<h2 id="第二套"><a href="#第二套" class="headerlink" title="第二套"></a>第二套</h2><p>在SQL Server 2008中，设某数据库中有商品表（商品号，商品名，进货价格)，商品号为主码;销售表（商品号，销售时间，销售数量，销售价格，本次利润)，商品号和销售时间为主码，销售价格为本次销售商品的单价。现要求每当在销售表中插入前4列数据时（假设—次只插入一行数据)，系统自动计算本次销售产生的利润，并将该利润赋给销售表的第5列”本次利润”。请编写实现上述功能的后触发型触发器代码。(10分)<br>CREATE TRIGGER tri_name ON 销售表 FOR INSERT<br>  AS<br>   DECLARE @进价 money, @销量 int,@售价 money,@利润 money<br>   SElECT @进价 &#x3D; 进货价格 FROM 商品表<br>   SELECT @销量 &#x3D; 销售数量,@售价 &#x3D; 销售价格 FROM inserted<br>   SET @利润 &#x3D; @销量*(@售价-@进价)<br>   UPDATE 销售表 SET 本次利润 &#x3D; @利润<br>   WHERE 商品号 IN(SELECT 商品号 FROM inserted)<br>   AND 销售时间 IN(SELECT 销售时间 FROM inserted)<br>END</p>
<h2 id="第三套"><a href="#第三套" class="headerlink" title="第三套"></a>第三套</h2><p>设在SQL Server 2008某数据库中，已建立了四个文件组: fg1、fg2、fg3和fg4，以及一个分区函数RangePF1。RangePF1的定义代码如下:<br>CREATE PARTITION FUNCTION RangePF1(int)AS RANGE LEFT FOR VALUES(100,200,300)<br>(1)请基于RangePF1创建一个分区方案RangePS1，每个分区对应一个文件组。(5分)<br>(2）请使用RangePS1创建一个分区表PartitionT(Gid, GoodName, Price)，该表基于Gid列创建分区。其中Gid: int类型，取值大于等于1; GoodName:统一字符编码可变长类型，最多可存储20个汉字;Price:定点小数类型，小数部分1位，整数部分到千位。(5分)<br>[][创建分区方案 方案名 as 分区 函数名 to （文件组）]<br>[][CREATE TABLE tb_name （）on 方案名（Gid）]<br>1:<br>create partition scheme RangePS1<br>as partition RangePF1<br>to(fg1,fg2,fg3,fg4)<br>2:<br>create table orders<br>(<br>GID int identity(1,1) primary key,<br>GoodName varchar(40),<br>Price numeric(5,1)<br>)<br>on RangePS1(GID)</p>
<h2 id="第五套"><a href="#第五套" class="headerlink" title="第五套"></a>第五套</h2><p>设有图书管理数据库，包含三张表:图书明细表(图书编号，图书类别，图书名称，作者，出版社，出版日期，定价);读者表（借书证号，姓名，系别，办证日期);借出信息表（借出编号，借书证号，图书编号，借书日期);完成下列操作:(10分)定义一个多语句表值函数，用于查询学生借书情况，只需提供参数:借书证号，就可以通过调用函数返回此学生的借书情况，若有借书籍，则返回所借书籍的编号、书籍名称、定价和借书日期;若没有在借书籍，则返回记录为空。设函数名为: f_BorrowBook(@jszh char(20))。</p>
<p>CREATE FUNCTION f_BorrowBook(@jszh char(20))<br>RETURNS @jsqkb TABLE(书籍编号 char(20),书籍名称 char(50),定价 float,借书日期 datetime)<br>AS<br>BEGIN<br>INSERT INTO @jsqkb<br>SELECT图书明细表.图书编号,图书名称,定价,借出信息表.借书日期 FROM 借出信息表,图书明细表<br>WHERE 借出信息表.图书编号&#x3D;图书明细表.图书编号 AND 借出信息表.借书证号&#x3D;@jszh<br>RETURN<br>END</p>
<h2 id="第七套"><a href="#第七套" class="headerlink" title="第七套"></a>第七套</h2><p>BORROWER：<br>借书证号  姓名  系名  班级<br>12011106 张三 计算机 12-1<br>12011107 李四 计算机 12-1<br>12012113 王五 语文 12-2</p>
<p>LOANS??<br>借书证号  图书馆登记号  借书日期<br>12011106 T001001 2012.01.02<br>12012113 T001026 2013.02.06</p>
<p>BOOKS??<br>索书号 书名  作者 图书登记号 出版社 价格<br>TP311.1 数据库 李明 T001001 人民 19.00<br>TP311.2 二级C语言 王珊 T001026 科学 32.00<br>1.检索至少借了五本书的同学借书证号，姓名，系名，借书数量<br>2.检索借书和王五同学所借图书的任意一本相同的学牲姓名，系名，书名和借书日期<br>SELECT LOANS.借书证号,姓名,系名,COUNT(<em>) AS 借书数量<br>FROM BORROWER,LOANS<br>WHERE BORROWER.借书证号&#x3D;LOANS.借书证号<br>GROUP BY LOANS.借书证号,姓名,系名<br>HAVING COUNT(</em>)&gt;&#x3D;5;</p>
<p>SELECT 姓名,系名,书名,借书日期<br>FROM  BORROWER,LOANS , BOOKS<br>WHERE<br> BORROWER.借书证号&#x3D;LOANS.借书证号 AND LOANS.图书馆登记号&#x3D;BOOKS.图书馆登记号<br>AND 索书号 IN<br>(SELECT 索书号 FROM BORROWER,LOANS,BOOKS<br>WHERE BORROW.借书证号&#x3D;LOANS.借书证号<br>AND LOANS.图书馆登记号&#x3D;BOOKS.图书馆登记号<br>AND 姓名&#x3D;”王五”)<br>group by 姓名,系名,书名,借书日期<br>having 姓名 !&#x3D;’王五’</p>
<h2 id="塢-洢"><a href="#塢-洢" class="headerlink" title="??????????????????????????????????????塢?????????????????? ?洢????"></a>??????????????????????????????????????塢?????????????????? ?洢????</h2><p>CREATE TABLE 商品表(<br>商品号 char(10) PRIMARY KEY,<br>商品名 varchar(40),<br>类别 varchar(20),<br>进货单价 int,<br>销售总量 int default 0)<br>CREATE TABLE 销售表(<br>商品号 char(10) REFERENCES 商品表(商品号),<br>销售时间 datetime,<br>销售数量 int,<br>销售单价 int,<br>PRIMARY KEY(商品号,销售时间))<br>9.12.创建存储过程:指定类别的每种商品今年的销售总数量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create proc p_name @lb varchar(20)</span><br><span class="line">as</span><br><span class="line">select 商品名, (select sum(销售数量) from 销售表 a </span><br><span class="line">where a.商品号=b.商品号 and year(销售时间)=year(getdate())) as 销售总数量</span><br><span class="line">from 商品表 b</span><br><span class="line">where b.类别=@lb</span><br></pre></td></tr></table></figure>
<p>8.11.创建存储过程:指定类别的每种商品今年的销售总金额</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create proc p_name @lb varchar(20)</span><br><span class="line">as</span><br><span class="line">select 商品名, (select sum(销售数量*销售单价) from 销售表 a</span><br><span class="line">where a.商品号=b.商品号 and year(销售时间)=year(getdate())) as 销售总金额</span><br><span class="line">from 商品表 b</span><br><span class="line">where b.类别=@lb</span><br></pre></td></tr></table></figure>
<p>13.创建存储过程:指定类别的每种商品去年的销售总数量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create proc p_name @lb varchar(20)</span><br><span class="line">as</span><br><span class="line">select a.商品号,商品名,sum(销售数量) as 销售总数量</span><br><span class="line">from 商品表 a join 销售表 b</span><br><span class="line">on a.商品号=b.商品号</span><br><span class="line">where year(销售时间)=year(dateadd(year,-1,getdate()))</span><br><span class="line">and 类别=@lb</span><br><span class="line">group by a.商品号,商品名</span><br></pre></td></tr></table></figure>
<p>17.创建存储过程:指定日期范围每种商品的销售总数量,包括未销售的商品.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create proc p1 @start_date date, @end_date date</span><br><span class="line">as</span><br><span class="line">select 商品表.商品号,sum(销售数量) from 商品表</span><br><span class="line">left join 销售表 on 商品表.商品号=销售表.商品号</span><br><span class="line">where 销售时间 between @start_date and @end_date</span><br><span class="line">group by 商品表.商品号</span><br></pre></td></tr></table></figure>
<p>19.创建存储过程:指定商品号的商品销售总数量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create proc p1 @model varchar(10),@total int output</span><br><span class="line">as</span><br><span class="line">set @total=(select sum(销售数量) from 销售表 s </span><br><span class="line">join 商品表 c on s.商品号=c.商品号</span><br><span class="line">where 商品号=@model)</span><br></pre></td></tr></table></figure>
<p>14.创建存储过程:指定类别的每个商品的销售总利润,包括未销售的(值为0)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">create proc p_Profit @lb char(10)</span><br><span class="line">as</span><br><span class="line">select 商品表.商品号,</span><br><span class="line">case</span><br><span class="line">when 销售表.商品号 is null then 0</span><br><span class="line">else sum((销售单价-进货单价)*数量)</span><br><span class="line">end as 销售总利润</span><br><span class="line">from 商品表 left join 销售表 on 商品表.商品号=销售表.商品号</span><br><span class="line">where 类别=@lb</span><br><span class="line">group by 商品表.商品号</span><br></pre></td></tr></table></figure>
<p>16.标量函数:指定商品号返回销售总金额</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create function dbo.f_TotalQty(@GoodID char)</span><br><span class="line">returns int</span><br><span class="line">as</span><br><span class="line">begin</span><br><span class="line">return(select sum(销售数量*销售单价)from 商品表 join 销售表</span><br><span class="line">on 商品表.商品号=销售表.商品号</span><br><span class="line">where 商品号=@GoodID)</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>4.多语句表值函数: 返回类别参数的每种商品在2012年的销售总利润,并降序输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create function f_Profit(@lb char(10))</span><br><span class="line">returns @ProfitTable table(商品号 char(10),总利润 int)</span><br><span class="line">as</span><br><span class="line">begin</span><br><span class="line">insert into @ProfitTable</span><br><span class="line">select a.商品号,sum(销售数量*(销售单价-进货单价)) as 总利润</span><br><span class="line">from 销售表 a join 商品表 b on a.商品号=b.商品号</span><br><span class="line">where a.商品号 in(select 商品号 from 商品表 where 类别=@lb)</span><br><span class="line">group by a.商品号</span><br><span class="line">order by 总利润 desc</span><br><span class="line">return @ProfitTable</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>10.6.多语句表值函数：统计指定年份中每个商品的销售总额</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create function fun_name(@year int)</span><br><span class="line">returns @fun_name table(商品号 char(10),销售总金额 int)</span><br><span class="line">as</span><br><span class="line">begin</span><br><span class="line">insert into @fun_name</span><br><span class="line">select a.商品号,sum(a.销售单价*b.销售数量) from 商品表 a</span><br><span class="line">join 销售表 b on a.商品号=b.商品号</span><br><span class="line">where year(b.销售时间)=@year</span><br><span class="line">group by a.商品号</span><br><span class="line">return</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>15.18.创建触发器:每当在销售表中插入一条销售记录, 修改商品表中对应商品的销售总量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create trigger tri_name on 销售表 for insert</span><br><span class="line">as</span><br><span class="line">update 商品表</span><br><span class="line">set 销售总量=商品表.销售总量+(select 销售数量 from inserted)</span><br><span class="line">where 商品号 in(select 商品号 from inserted)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create trigger tri_name on 销售表 after insert</span><br><span class="line">as</span><br><span class="line">declare @Sales_Amount int</span><br><span class="line">set @Sales_Amount=(select 销售数量 from inserted)</span><br><span class="line">update 商品表 set 销售总量=商品表.销售总量+@Sales_Amount</span><br><span class="line">where 商品号 in (select 商品号 from inserted)</span><br></pre></td></tr></table></figure>








<h2 id="第二十套"><a href="#第二十套" class="headerlink" title="第二十套"></a>第二十套</h2><p>CREATE TABLE 出租表(<br>房屋号 char(10),<br>出租日期 datetime,<br>租期 int not null, –月数<br>到期日期 datetime,<br>PRIMARY KEY(房屋号,出租日期));<br>创建触发器:每当在出租表插入一行数据(房屋号,出租日期,租期),自动计算到期日期<br>CREATE TRIGGER tri ON 出租表 FOR insert<br>AS<br>update 出租表 SET 到期日期 &#x3D; dateadd(month,租期,出租日期)<br>WHERE 房屋号 &#x3D; (SELECT 房屋号 FROM inserted )<br>and 出租日期&#x3D;(select 出租日期 from inserted)</p>
<h2 id="洢"><a href="#洢" class="headerlink" title="?????????????? ????????洢????"></a>?????????????? ????????洢????</h2><p>create table 房屋表(<br>房屋号 char(10) primary key,<br>房屋地址 char(20) not null,<br>面积 int,<br>月租金 int<br>)<br>create table 租贷表(<br>房屋号 char(10),<br>租贷日期 datetime,<br>租贷月数 int not null,<br>本次总租金 int,<br>primary key(房屋号,租贷日期),<br>foreign key(房屋号) references 房屋表(房屋号)<br>)<br>创建触发器:每当在租贷表插入一行数据（房屋号，租贷日期，租贷月数），计算本次月租金</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create trigger tri_name on 租贷表 for insert</span><br><span class="line">as</span><br><span class="line">declare @x int </span><br><span class="line">set @x=(select 月租金 from 房屋表 where 房屋号=</span><br><span class="line">(select 房屋号 from inserted))</span><br><span class="line">update 租贷表 set 本次月租金=租贷月数*@x</span><br><span class="line">from 租贷表 a join 房屋表 b on a.房屋号=b.房屋号</span><br><span class="line">and a.租贷日期=b.租贷日期</span><br></pre></td></tr></table></figure>
<p>创建存储过程：输入房屋号，计算历史租金总和</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create proc p1 @room char(10),@total int output</span><br><span class="line">as</span><br><span class="line">set @total=(select sum(租贷月数*月租金) from 房屋表</span><br><span class="line">join 租贷表 on 房屋表.房屋号=租贷表.房屋号</span><br><span class="line">where a.房屋号=@room)</span><br></pre></td></tr></table></figure>

                </div>
                <!-- 4. 正文更新时间 -->
                <div class="post-footer__meta">
                    <p>更新于  2022-07-25 09:22:31 星期一</p>
                </div>
            </article>



            <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.js"></script>
            <script type="text/javascript">$(".highlight").wrap("<div class='code-wrapper' style='position:relative'></div>");!function (e, t, a) {var initCopyCode = function () {var copyHtml = '';copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';copyHtml += '  <i class="fa fa-clipboard"></i><span>复制</span>';copyHtml += '</button>';$(".highlight .code").before(copyHtml);var clipboard = new ClipboardJS('.btn-copy', {target: function (trigger) {return trigger.nextElementSibling;}});clipboard.on('success', function (e) {e.trigger.innerHTML = "<i class='fa fa-clipboard'></i><span>复制成功</span>";setTimeout(function () {e.trigger.innerHTML = "<i class='fa fa-clipboard'></i><span>复制</span>"}, 1000);e.clearSelection();});clipboard.on('error', function (e) {e.trigger.innerHTML = "<i class='fa fa-clipboard'></i><span>复制失败</span>";setTimeout(function () {e.trigger.innerHTML = "<i class='fa fa-clipboard'></i><span>复制</span>"}, 1000);e.clearSelection();});};initCopyCode();}(window, document);</script>
        </main>
<!-- 我们是__主体部分！我是__尾部部分！ -->
        <footer class="footer">
            <a href="#" class="button" id="b2t" title="回到顶部">
                <svg t="1662256713839" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="3050" width="50" height="50">
                    <path d="M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0zM697.6 582.4 627.2 582.4c-12.8 0-19.2 6.4-19.2 19.2l0 108.8c0 6.4-6.4 12.8-12.8 12.8L428.8 723.2c-6.4 0-12.8-6.4-12.8-12.8L416 595.2c0-6.4-6.4-19.2-19.2-19.2L326.4 576C320 582.4 320 576 320 576l179.2-172.8c6.4-6.4 12.8-6.4 19.2 0L704 576C704 576 704 582.4 697.6 582.4zM704 364.8 320 364.8c-19.2 0-32-12.8-32-32S300.8 300.8 320 300.8l384 0c19.2 0 32 12.8 32 32S723.2 364.8 704 364.8z"
                        p-id="3051" fill="#bfbfbf"></path>
                </svg>
            </a>
            <p class="footer-copyright">Copyright © 2022&nbsp;-&nbsp;2022 Koi_NL</p>
            <p class="poems_of_today"><span id="jinrishici-sentence">悟已往之不谏，知来者之可追。</span><script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script></p>
        </footer>
    </div>
</body>
</html>