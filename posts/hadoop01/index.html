<!DOCTYPE html>
<html lang="zh-CN">
<!-- 
    你好~ 欢迎来到我的乐园。下面就简单介绍下我的 body 部分。
    body 标签，主要是由加载 loading 与应用 app 所组成。
        - loading 加载页面。顾名思义，这里不做详细叙述。
        - app 中，分为头部部分 header、封面部分 cover、主体部分 main 和尾部部分 footer。
            - header、cover、footer 你可以分别在页面最上方，页面的中上方、页面的最下方找到。
                > 文章页找不到 cover、主页找不到 header 与 cover...还有什么页找不到什么？
            - main 中，有初始/列表页、文章页、主页、搜索页、友链页，错误页。
                - 初始/列表页在进入网站后即可看见。
                - 文章页需要点击文章后进入。
                - 让你有搜索内容需求时，可以进入搜索页。
                - 与其他人的交互，则尽在友链页。
                - 另外，我还新创建了主页，欢迎观看。
                - 最后，当你进入了不存在的页面时，就会出现错误页。
    祝你阅读愉快！ 
-->
<head>
    <title>第一章  分布式文件系统（HDFS）概述 | 锦鲤未离</title>
    <meta name="keywords" content="Hadoop">
    <meta charset="utf-8">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="Koi_NL">
    <meta name="generator" content="Hexo 6.1.0">
    <meta name="HandheldFriendly" content="True">
    <meta name="force-rendering" content="webkit">
    <meta name="author" content="Koi_NL,1099771017@qq.com"> 
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="mask-icon" href="/img/icon.png">
    <link rel="shortcut icon" href="/img/icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/icon.png">
    <link rel="canonical" href="http://example.com/posts/hadoop01/">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/dark.css">
    <link rel="stylesheet" id="hl-default-theme" href="/css/hlight-main.css" media="none">
    <link rel="stylesheet" id="hl-dark-theme" href="/css/hlight-dark.css" media="none">
    
    <script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>

<body>
    <div class="loading"><span></span><span></span><span></span><span></span><span></span></div>
    <script>document.onreadystatechange=function(){console.log(document.readyState);if(document.readyState=="complete"){$(".loading").fadeOut();}}</script>

    <div id="app">
<header class="header">
    <div class="header__left"><a href="/" class="button" title="回到首页">
            <svg t="1662257077921" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="9718" width="27" height="27">
                <path
        d="M1017.295381 515.625294c-8.918711 9.05797-23.377057 9.05797-32.295768 0L755.083237 303.3395c-1.513416-1.206227-2.807704-2.525091-3.989357-4.056938l-89.551638-90.944226c-1.513416-1.200084-2.807704-2.512803-3.989357-4.050794L512.000756 56.462215 38.999851 515.625294c-8.918711 9.05797-23.377057 9.05797-32.29372 0-8.918711-9.05797-8.918711-23.73954 0-32.797509L493.065647 10.095158c0.77002-1.130454 1.234898-2.394024 2.224046-3.405698 4.603734-4.677459 10.67583-6.829828 16.711063-6.682377 6.033185-0.147451 12.105281 2.004918 16.709015 6.682377 0.989147 1.011675 1.454026 2.275244 2.224046 3.405698l121.376383 123.262521L652.3102 71.16836c0 0-0.002048 0-0.002048-0.006144 0-13.114908 10.471037-23.751827 23.385249-23.751827l93.538947 0c6.459154 0 12.305978 2.660254 16.536989 6.952703 4.23306 4.298593 6.850307 10.24167 6.850307 16.799124l0 204.700282 224.675737 206.965287C1026.212043 491.885755 1026.212043 506.567325 1017.295381 515.625294zM745.851194 94.907899l-46.770497 0 0 85.959578 46.770497 47.491367L745.851194 94.907899zM163.72459 474.910509c12.916259 0 23.385249 10.630776 23.385249 23.745683l0 430.348784c0 26.235959 20.940027 47.49751 46.770497 47.49751l161.196225 0-0.002048 0L395.074513 688.656474c0-13.121052 10.471037-23.751827 23.385249-23.751827l187.079941 0c12.916259 0 23.385249 10.630776 23.385249 23.751827l0 287.846013-0.002048 0 161.196225 0c25.83047 0 46.768449-21.261551 46.768449-47.49751l-0.002048-430.348784c0-13.114908 10.468989-23.745683 23.385249-23.745683 12.914211 0 23.385249 10.630776 23.385249 23.745683l0 430.348784c0 52.469871-41.878006 94.995021-93.538947 94.995021L233.880336 1023.999997c-51.660941 0-93.538947-42.52515-93.538947-94.995021L140.34139 498.656193C140.34139 485.541285 150.810379 474.910509 163.72459 474.910509zM582.154454 976.502487l0-264.100329-140.309444 0 0 264.100329-0.002048 0L582.154454 976.502487 582.154454 976.502487z"
        p-id="44080" fill="#999"></path>
            </svg>
        </a></div>
    <div class="header__right">
        <form class="Search_nav_card" type="submit" name="search_formpage">
            <input class="Search_input" placeholder="输入" required name='search_SkipPage' autocomplete="off" value='' onKeyDown='if(event.keyCode==13)event.returnValue=false'>
            <input class="Text_search_button" name='submitSkip' type='button' onClick='Go_Page_search()' value='搜索'>
        </form>
        <script language=javascript> function Go_Page_search() { var Custom_path = 'https://koinl.github.io/page_search/?s='; if (document.search_formpage.search_SkipPage.value == 1) { window.location.href = Custom_path; } else { window.location.href = Custom_path + document.search_formpage.search_SkipPage.value; } }</script>
        <a href="javaScript:void(0);" id="btn-toggle-dark" title="夜间模式">
            <svg t="1662256981531" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="8697" width="30" height="30">
                <path d="M89.85 197.55m-26.03 0a26.03 26.03 0 1 0 52.06 0 26.03 26.03 0 1 0-52.06 0Z" fill="#999"
                    opacity=".8" p-id="34043"></path>
                <path d="M135.4 99.52m-26.03 0a26.03 26.03 0 1 0 52.06 0 26.03 26.03 0 1 0-52.06 0Z" fill="#999"
                    opacity=".8" p-id="34044"></path>
                <path d="M934.15 145.07m-26.03 0a26.03 26.03 0 1 0 52.06 0 26.03 26.03 0 1 0-52.06 0Z" fill="#999"
                    opacity=".8" p-id="34045"></path>
                <path d="M612.93 189.8V194.82h0.51c2.42 15.26 15.54 26.96 31.48 26.96h196.21c15.94 0 29.05-11.7 31.48-26.96h0.5v-15.45c0-17.67-14.31-31.98-31.98-31.98H644.91c-17.66 0-31.99 14.32-31.99 31.98v10.43zM619.43 411.04V416.06h0.51c2.42 15.26 15.54 26.96 31.48 26.96h196.21c15.94 0 29.05-11.7 31.48-26.96h0.5v-15.45c0-17.67-14.31-31.98-31.98-31.98H651.42c-17.66 0-31.99 14.32-31.99 31.98v10.43z"
                    fill="#999" opacity=".8" p-id="34046"></path>
                <path d="M632.26 430.79c0.01 0 0.01 0.01 0.03 0.02l3.25 3.78 0.39-0.33c11.79 10 29.36 10.31 41.45-0.09l178.53-217.51c12.09-10.39 14.4-27.81 6.28-40.97l0.38-0.32-3.27-3.81-5.83-6.77-0.97-1.13c-11.52-13.4-31.7-14.91-45.1-3.39L628.86 377.78c-13.39 11.51-14.91 31.72-3.39 45.11l0.97 1.13 5.82 6.77z"
                    fill="#999" opacity=".8" p-id="34047"></path>
                <path d="M511.94 950.5c-233.06 0-422.66-189.65-422.66-422.75 0-190.41 128.42-358.05 312.31-407.65 13.22-3.52 27.25 1.33 35.41 12.34 8.14 11.01 8.71 25.88 1.42 37.47-31.43 50.03-48.04 107.45-48.04 166.05 0 172.59 140.48 313.02 313.17 313.02 58.73 0 116.22-16.67 166.28-48.23a33.279 33.279 0 0 1 37.49 1.37 33.281 33.281 0 0 1 12.37 35.4C870.16 821.8 702.49 950.5 511.94 950.5zM344.17 213.93C230.3 274.77 155.8 394.66 155.8 527.76c0 196.42 159.76 356.22 356.13 356.22 133.25 0 253.21-74.72 314-188.92a376.765 376.765 0 0 1-122.39 20.44c-209.36 0-379.7-170.26-379.7-379.53 0.01-41.53 6.87-82.76 20.33-122.04z m0 0"
                    fill="#999" opacity=".8" p-id="34048"></path>
            </svg>
        </a>
    </div>
    <script>(() => { const rootElement = document.documentElement; const darkModeStorageKey = 'user-color-scheme'; const darkModeMediaQueryKey = '--color-mode'; const rootElementDarkModeAttributeName = 'data-user-color-scheme'; const setLS = (k, v) => { try { localStorage.setItem(k, v); } catch (e) { } }; const removeLS = (k) => { try { localStorage.removeItem(k); } catch (e) { } }; const getLS = (k) => { try { return localStorage.getItem(k); } catch (e) { return null; } }; const getModeFromCSSMediaQuery = () => { const res = getComputedStyle(rootElement).getPropertyValue(darkModeMediaQueryKey); if (res.length) return res.replace(/["'\s]/g, ''); return res === 'dark' ? 'dark' : 'light'; }; const resetRootDarkModeAttributeAndLS = () => { rootElement.removeAttribute(rootElementDarkModeAttributeName); removeLS(darkModeStorageKey); }; const validColorModeKeys = { dark: true, light: true, }; const applyCustomDarkModeSettings = (mode) => { const currentSetting = mode || getLS(darkModeStorageKey); if (document.getElementById('hl-dark-theme')) { if (validColorModeKeys[currentSetting]) { if (currentSetting === 'dark') { document.getElementById('hl-default-theme').media = 'none'; document.getElementById('hl-dark-theme').media = 'all'; } else { document.getElementById('hl-dark-theme').media = 'none'; document.getElementById('hl-default-theme').media = 'all'; } } else { if (getModeFromCSSMediaQuery() === 'dark') { document.getElementById('hl-default-theme').media = 'none'; document.getElementById('hl-dark-theme').media = 'all'; } else { document.getElementById('hl-dark-theme').media = 'none'; document.getElementById('hl-default-theme').media = 'all'; } } } else if (document.getElementById('hl-default-theme')) { document.getElementById('hl-default-theme').media = 'all'; } if (currentSetting === getModeFromCSSMediaQuery()) { resetRootDarkModeAttributeAndLS(); } else if (validColorModeKeys[currentSetting]) { rootElement.setAttribute(rootElementDarkModeAttributeName, currentSetting); } else { resetRootDarkModeAttributeAndLS(); } }; const invertDarkModeObj = { dark: 'light', light: 'dark', }; const toggleCustomDarkMode = () => { var currentSetting = getLS(darkModeStorageKey); if (validColorModeKeys[currentSetting]) { currentSetting = invertDarkModeObj[currentSetting]; } else if (currentSetting === null) { currentSetting = invertDarkModeObj[getModeFromCSSMediaQuery()]; } else { return; } setLS(darkModeStorageKey, currentSetting); return currentSetting; }; applyCustomDarkModeSettings(); window.onload = () => { const darkModeToggleBottonElement = document.getElementById('btn-toggle-dark'); darkModeToggleBottonElement.addEventListener('click', () => { applyCustomDarkModeSettings(toggleCustomDarkMode()); }); }; })();</script>
</header>


        <div class="cover">
            <div class="cover__logo">
                <div class="carousel" id="carousel_main">
                    <ul id="div_img">
                        <li class="every_img"><img src="/img/cover/LunBoTu/pan.jpg" id="link_img" onClick="link('https://www.csdn.net/', '_self')" alt="" title="" /></li>
                        <li class="every_img"><img src="/img/cover/LunBoTu/development_log.jpg" id="link_img" onClick="link('https://koinl.github.io/development_log/', '_self')" alt="" title="" /></li>
                        <li class="every_img"><img src="/img/cover/LunBoTu/home_welcome.jpg" id="link_img" onClick="link('https://koinl.github.io/page_home/', '_self')" alt="" title="" /></li>
                        <li class="every_img"><img src="/img/cover/LunBoTu/Picture_APP_By_KoiNL.jpg" id="link_img" onClick="link('https://koinl.github.io/apk/APP_By_KoiNL.apk', '_self')" alt="" title="" /></li>
                        <li class="every_img"><img src="/img/cover/LunBoTu/new_blog_theme.jpg" id="link_img" onClick="link('https://koinl.github.io/', '_self')" alt="" title="" /></li>
                    </ul>
                    <ul class="div_circle"><li class = every_circle></li><li class = every_circle></li><li class = every_circle></li><li class = every_circle></li><li class = every_circle></li></ul>
                    <div class="btn left"><p class="btn_p">《&nbsp</p></div><div class="btn right"><p class="btn_p">&nbsp》</p></div>
                </div><script type="text/javascript"> $(function (){ var max_num=4; var time_stop=4250; var time_swap=1250; var num =0; var chosen_circle_color="#0aa1ed"; var chosen_not_circle_color="#ffffff"; function every_thing(){$("#div_img").animate({left:-$(".every_img").eq(0).width()*num},time_swap); $(".every_circle").eq(num).css("background",chosen_circle_color) .siblings('li').css("background",chosen_not_circle_color);} function Right_move(){if(num>=max_num){num=0;}else{num++;}every_thing();} function Left_move(){if(num===0){num=max_num;}else{num--;}every_thing();} $(".every_circle").eq(0).css("background",chosen_circle_color); $("#div_img").width($('.every_img').length*$('.every_img').eq(0).width()); var id =setInterval(Right_move,time_stop); $("#carousel_main").mouseover(function (){clearInterval(id)}); $("#carousel_main").mouseout(function (){id=setInterval(Right_move,time_stop);}); $(".left").click(function (){ $("#div_img").stop(); Left_move(); }); $(".right").click(function (){ $("#div_img").stop(); Right_move(); }); $(".every_circle").mouseover(function (){num =$(this).index(); $("#div_img").stop(); every_thing();}); }); function link(jinliweili_Url, quality_target){window.open(jinliweili_Url,quality_target);}</script>
            </div>
            <div class="cover__desc">
                <div class='avator_logo_link'><img alt="離.png" src="/img/avator.png"></div>
                <div class="desc-com"><div class="desc-button"><div class="desc-box">是</div><div class="desc-box">锦</div><div class="desc-box">鲤</div><div class="desc-box">未</div><div class="desc-box">离</div></div></div>
                <button class="btn-cssbuttons">
                    <span class="btn-cssbuttons-span">
                        <svg t="1662258197467" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="31880" width="18" height="18"><path d="M512 164.7c12.9 0 25.9 0.7 39.1 2.1 163.3 17.9 294.5 153.8 307 317.6 5.4 71.2-10.4 138-42.2 195.2-15.8 28.4-13.8 63.3 2.4 91.4l27.5 47.5c10.4 18-2.6 40.4-23.3 40.4h-286l0.7-1c-8.4 0.7-16.8 1-25.1 1-23.3 0-46.5-2.6-69.8-7.6C300.1 820.5 187.4 704 168 559.9c-28.5-213 136.5-395.1 344-395.2m0-100.5c-129.1 0-251.9 55.8-337 153-85 97.2-123.8 226.9-106.5 356 24.8 184.7 166.4 336 352.4 376.4 30.3 6.6 61 9.9 91.2 9.9 5.5 0 11-0.1 16.4-0.3 2.7 0.2 5.3 0.3 8 0.3h286c45.4 0 87.7-24.4 110.4-63.8 22.7-39.3 22.7-88.2-0.1-127.5L906.7 723c40.4-75 58.2-160 51.6-246.3C942.3 266.1 771.9 89.9 562 67c-16.6-1.9-33.4-2.8-50-2.8z" p-id="31881" fill="#999"></path><path d="M331.4 511.9m-50.3 0a50.3 50.3 0 1 0 100.6 0 50.3 50.3 0 1 0-100.6 0Z" p-id="31882" fill="#999"></path><path d="M512 511.9m-50.3 0a50.3 50.3 0 1 0 100.6 0 50.3 50.3 0 1 0-100.6 0Z" p-id="31883" fill="#999"></path><path d="M692.6 511.9m-50.3 0a50.3 50.3 0 1 0 100.6 0 50.3 50.3 0 1 0-100.6 0Z" p-id="31884" fill="#999"></path></svg>
                    </span>
                    <span style="font-size: 1px;">联系我　　</span>
                    <ul>
                        <li id="WeChat"><a href="/img/cover/btn-cssbuttons-span/WeChat.jpg" title="WeChat" target="_blank"><svg height="18" width="18" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1024 1024" class="icon"> <path d="M676.325 381.17h5.098c-25.972-114.081-144.421-200.37-286.538-200.37-161.17 0-291.877 110.804-291.877 247.581 0 79.493 44.176 150.247 112.867 195.516l-28.884 85.925 101.702-50.486-1.942-0.971c33.497 11.286 69.905 17.598 108.134 17.598 8.617 0 17.234-0.364 25.729-0.971-7.646-21.117-11.893-43.691-11.893-66.992 0-125.125 119.786-226.828 267.605-226.828zM489.184 319.276c21.482 0 38.836 15.292 38.836 34.102 0 14.563-10.437 27.065-25.122 31.918-4.247 1.456-8.86 2.185-13.714 2.185-21.482 0-38.836-15.292-38.836-34.102s17.476-34.102 38.836-34.102zM315.634 385.419c-4.247 1.456-8.86 2.185-13.714 2.185-21.482 0-38.836-15.292-38.836-34.102s17.355-34.102 38.836-34.102 38.836 15.292 38.836 34.102c0 14.563-10.437 27.065-25.122 31.918z" fill="#999999" p-id="3256"></path> <path d="M922.45 608.241c0-115.295-110.197-208.865-246.124-208.865s-246.124 93.45-246.124 208.865 110.197 208.865 246.124 208.865c30.462 0 59.711-4.733 86.774-13.349l78.279 42.962-21.117-69.177c61.895-37.866 102.188-99.638 102.188-169.301zM610.546 570.254c-3.519 1.214-7.404 1.821-11.408 1.821-17.962 0-32.526-12.865-32.526-28.641s14.563-28.641 32.526-28.641 32.526 12.865 32.526 28.641c0 12.257-8.738 22.695-21.117 26.821zM769.897 570.254c-3.519 1.214-7.404 1.821-11.408 1.821-17.962 0-32.526-12.865-32.526-28.641s14.563-28.641 32.526-28.641 32.526 12.865 32.526 28.641c0 12.257-8.738 22.695-21.117 26.821z" fill="#999999" p-id="3257"></path> </svg></a></li>
                        <li id="Telegram"><a href="/img/cover/btn-cssbuttons-span/Telegram.jpg" title="Telegram" target="_blank"><svg height="18" width="18" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1024 1024" class="icon"> <path d="M417.28 795.733333l11.946667-180.48 327.68-295.253333c14.506667-13.226667-2.986667-19.626667-22.186667-8.106667L330.24 567.466667 155.306667 512c-37.546667-10.666667-37.973333-36.693333 8.533333-55.466667l681.386667-262.826666c31.146667-14.08 61.013333 7.68 49.066666 55.466666l-116.053333 546.56c-8.106667 38.826667-31.573333 48.213333-64 30.293334L537.6 695.466667l-84.906667 82.346666c-9.813333 9.813333-17.92 17.92-35.413333 17.92z" fill="#999999"></path></svg></a></li>
                        <li id="E-mail"><a href="/img/cover/btn-cssbuttons-span/G-mail.jpg" title="G-mail" target="_blank"><svg height="18" width="18" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1024 1024" class="icon"> <path d="M134 297.4c22 11.6 327.6 178.2 339 184.2 11.4 6 23 8.8 41 8.8 18 0 29.6-2.8 41-8.8 11.4-6 317-172.6 339-184.2 8.2-4.2 22-11.8 25-20.4 5.2-15.2-0.4-21-22.6-21L514 256 131.6 256c-22.2 0-27.8 6-22.6 21C112 285.8 125.8 293.2 134 297.4z" p-id="5247" fill="#999"></path> <path d="M911.4 306.4c-16.4 8.4-163.6 113.2-261 176.2l164.4 185c4 4 5.8 8.8 3.6 11.2-2.4 2.2-7.6 1-11.8-2.8l-197.2-166.4c-29.8 19.2-50.8 32.4-54.4 34.4-15.4 7.8-26.2 8.8-41 8.8-14.8 0-25.6-1-41-8.8-3.8-2-24.6-15.2-54.4-34.4l-197.2 166.4c-4 4-9.4 5.2-11.8 2.8-2.4-2.2-0.6-7.2 3.4-11.2l164.2-185c-97.4-63-246.2-167.8-262.6-176.2-17.6-9-18.6 1.6-18.6 9.8 0 8.2 0 410 0 410 0 18.6 27.4 41.8 47 41.8L514 768l371 0c19.6 0 43-23.4 43-41.8 0 0 0-402 0-410C928 307.8 929.2 297.4 911.4 306.4z" p-id="5248" fill="#999"></path></svg></a></li>
                        <li id="Github">
                            <a href="https://github.com/koinl" title="Github" target="_blank">
                                <svg height="13" width="18" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1024 1024" class="icon">
                                    <path d="M855.557 216.855c35.621-66.153-5.089-152.661-5.089-152.661-91.597 0-157.75 61.064-157.75 61.064-35.621-20.355-152.661-20.355-152.661-20.355s-117.04 0-152.661 20.355c0 0-66.153-61.064-157.75-61.064 0 0-40.71 86.508-5.089 152.661 0 0-81.419 76.331-50.887 239.169 28.691 153.018 162.838 193.371 249.346 193.371 0 0-35.621 30.532-30.532 81.419 0 0-50.887 30.532-101.774 10.177s-76.331-71.242-76.331-71.242-50.887-66.153-101.774-40.71c0 0-15.266 15.266 40.71 40.71 0 0 40.71 61.064 55.976 96.685 15.266 35.621 96.685 66.153 178.105 45.798v117.04s0 10.177-20.355 15.266-20.355 15.266-10.177 15.266H723.25c10.177 0 10.177-10.177-10.177-15.266-20.355-5.089-20.355-15.266-20.355-15.266v-117.04s0.447-61.03 0-81.419c-1.119-51.128-35.621-81.419-35.621-81.419 86.508 0 220.655-40.353 249.346-193.371 30.533-162.837-50.886-239.168-50.886-239.168z" p-id="3872" fill="#999999"></path>
                                </svg>
                            </a>
                        </li>
                    </ul>
                </button>
            </div>
            <div class="cover__intro">
                <details>
                    <summary>
                        <a href="/page_home/" target="_self"><button>主页</button></a> 
                        <a href="/" target="_self"><button>首页</button></a> 
                        <a href="/page_friends/" target="_self"><button>友链页</button></a> 
                        <p title="打开分类">分类流</p>
                        <a href="/development_log/" target="_self"><button>研发日志</button></a> 
                        <a href="/pan/" target="_self"><button>网盘</button></a> 
                    </summary>
                    <div class="fold-content">
                        <div class="dropdown-menus" id="dropdown-menus"> • 分类 • 
                            <a href="/categories/Hadoop" class="dropdown-menu button">Hadoop</a> • 
                            <a href="/categories/Data-Processing-and-Analysing" class="dropdown-menu button">数据处理与分析(Py)</a> • 
                            <a href="/categories/Data-Visualization" class="dropdown-menu button">数据可视化</a> • 
                            <a href="/categories/Data-Mining" class="dropdown-menu button">数据挖掘</a> • 
                            <a href="/categories/Mathematical-Modeling" class="dropdown-menu button">数学建模</a> • 
                            <a href="/categories/Python" class="dropdown-menu button">Python</a> • 
                            <a href="/categories/Linux" class="dropdown-menu button">Linux</a> • 
                            <a href="/categories/Data-Structure-and-Algorithm" class="dropdown-menu button">数据结构与算法</a> • 
                            <a href="/categories/SqlServer" class="dropdown-menu button">SQL Server</a> • 
                            <a href="/categories/MATLAB" class="dropdown-menu button">MATLAB</a> • 
                            <a href="/categories/java" class="dropdown-menu button">Java</a> • 
                            <a href="/categories/%E7%94%B5%E5%AD%90%E8%AE%BE%E5%A4%87" class="dropdown-menu button">电子设备</a> • 
                        </div>
                    </div>
                </details>
            </div>
            <div class="cover__link_by_friendPage" style="margin-top: -10px;">
                <a target="_blank" rel="noopener" href="https://www.baidu.com/from=844b/s?word=%E4%B8%B4%E6%BD%BC%E5%A4%A9%E6%B0%94&sa=tb&ts=6496545&t_kt=0&ie=utf-8&rsv_t=7a3ft91XonPtLcHNk6T4zAw6Z3IDfx9pjAWCcts61nzyApW6kTlbYMnWvA&ms=1&rsv_pq=11284953986776333406&gpc=&ss=110&sugid=128984770210573&rqlang=zh&rsv_sug4=3284&inputT=188&oq=%E5%A4%A9%E6%B0%94">
                    <svg t="1666769950755" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12878" width="30" height="23"><path d="M880.96 520.832s-0.064 0 0 0a164.672 164.672 0 0 0-156.928-214.08c-39.04 0-75.264 13.632-103.744 36.864a278.4 278.4 0 0 0-42.176-93.376 273.92 273.92 0 0 0-177.792-112.896 274.624 274.624 0 0 0-318.72 223.616 273.088 273.088 0 0 0 25.856 172.096l0.256-0.128-0.128 0.64A187.776 187.776 0 0 0 0 703.168a188.032 188.032 0 0 0 187.776 187.776h648.512a187.968 187.968 0 0 0 187.776-187.776 188.16 188.16 0 0 0-143.104-182.336z m-44.736 304.576H187.776a122.368 122.368 0 0 1-122.24-122.24c0-53.76 34.88-99.456 83.136-115.776l-0.064-0.064a40.512 40.512 0 0 0 47.36-38.976v-0.96a40.64 40.64 0 0 0-16-32.256h0.064a202.496 202.496 0 0 1-27.328-141.76 202.688 202.688 0 0 1 235.072-164.992 201.6 201.6 0 0 1 131.2 83.456 201.6 201.6 0 0 1 32.256 159.04 37.248 37.248 0 0 0 73.088 13.888 41.216 41.216 0 0 1 0.576-5.504 99.712 99.712 0 0 1 116.544-86.72 100.352 100.352 0 0 1 72.448 143.168h0.064a39.936 39.936 0 0 0-8.64 24.96c0 22.464 18.048 40.768 40.448 40.768l0.832-0.128-0.256 0.256c62.656 5.12 112.128 57.792 112.128 121.728a122.24 122.24 0 0 1-122.24 122.112z" p-id="12879" fill="#999999"></path><path d="M281.088 279.232c-30.016 12.928-61.056 29.504-76.864 59.584-14.336 27.264-7.744 58.944 3.072 86.08 9.664 24.256 49.344 13.696 39.488-10.88-7.424-18.56-15.04-39.552-5.12-58.56 11.072-21.12 39.616-32.064 60.032-40.896 24.256-10.368 3.392-45.632-20.608-35.328z" p-id="12880" fill="#999999"></path></svg>
                </a>
                <a target="_blank" rel="noopener" href="https://www.baidu.com/from=844b/s?word=%E6%97%A5%E5%8E%86&ts=4779966&t_kt=0&ie=utf-8&fm_kl=021394be2f&rsv_iqid=4012764725&rsv_t=52e5W9EBFpDpv5GgF67oXbAYkq0MODxa7e%252BpS6yShqaUAFxtWWajQX5oiQ&sa=ib&ms=1&rsv_pq=4012764725&rsv_sug4=4899&tj=1&ss=011&inputT=24">
                    <svg t="1666768613400" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3392" width="30" height="22"><path d="M725.333333 170.666667h74.709334C864.853333 170.666667 917.333333 223.189333 917.333333 288.096V799.893333C917.333333 864.757333 864.832 917.333333 800.042667 917.333333H223.957333C159.146667 917.333333 106.666667 864.810667 106.666667 799.904V288.106667C106.666667 223.242667 159.168 170.666667 223.957333 170.666667H298.666667v-32a32 32 0 0 1 64 0v32h298.666666v-32a32 32 0 0 1 64 0v32z m0 64v32a32 32 0 0 1-64 0v-32H362.666667v32a32 32 0 0 1-64 0v-32h-74.709334A53.354667 53.354667 0 0 0 170.666667 288.096V799.893333A53.301333 53.301333 0 0 0 223.957333 853.333333h576.085334A53.354667 53.354667 0 0 0 853.333333 799.904V288.106667A53.301333 53.301333 0 0 0 800.042667 234.666667H725.333333z m-10.666666 224a32 32 0 0 1 0 64H309.333333a32 32 0 0 1 0-64h405.333334zM586.666667 618.666667a32 32 0 0 1 0 64H309.333333a32 32 0 0 1 0-64h277.333334z" p-id="3393" fill="#999999"></path></svg>
                    </a>
                <a target="_blank" rel="noopener" href="https://mail.google.com/mail/mu/mp/372/#tl/%E6%94%B6%E4%BB%B6%E7%AE%B1">
                    <svg t="1666769680196" class="icon" viewBox="0 0 1040 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8095" width="30" height="21"><path d="M818.97651 64.224744 204.713428 64.224744c-113.073288 0-204.714452 93.713358-204.714452 209.238488l0 413.642878c0 115.52513 91.641163 208.357422 204.714452 208.357422l614.262058 0c113.134687 0 204.771757-92.833315 204.771757-208.357422L1023.747243 273.463232C1023.748267 157.939125 932.110173 64.224744 818.97651 64.224744zM709.783599 482.420311l249.786996-150.083204 0 296.587905L709.783599 482.420311zM204.713428 128.026862l614.262058 0c72.988338 0 133.375683 58.618049 139.984195 132.059712L511.875157 528.771989 64.50206 259.912611C71.221088 186.55179 131.840724 128.026862 204.713428 128.026862zM63.87375 332.154959l250.091942 150.266375L63.87375 629.103068 63.87375 332.154959zM818.97651 831.417867 204.713428 831.417867c-72.79391 0-133.36238-57.398268-140.190903-130.530892l309.642223-181.605128c0.189312-0.11461 0.370437-0.23843 0.555655-0.356111l121.31295 72.890101c4.840238 2.889817 10.308787 4.397147 15.84078 4.397147 5.529947 0 10.997472-1.50733 15.838733-4.397147l121.314996-72.891124c0.186242 0.118704 0.367367 0.242524 0.557702 0.357134l309.352627 181.435259C952.219163 773.930571 891.884007 831.417867 818.97651 831.417867z" p-id="8096" fill="#999999"></path></svg>
                </a>
            </div>
        </div>


<!-- 我们是__应用部分！我是__文章部分！ -->
        <main class="main POST">
            <!-- 一、上·位置 --><style>.cover {clip-path: circle(0); max-width: 1px; max-height: 1px; min-height: 0; margin: 0; line-height: 0;}</style>
            <div class="post-title">
                <!-- 1. 文章标题 -->
                <h1 class="post-title__text">第一章  分布式文件系统（HDFS）概述</h1>
                <!-- 2. 时间与类别 -->
                <div class="post-title__meta">
                    <p>创建于  2022-09-07 12:18:31 星期三 · </p>
                    <p class="Page_Development_log"></p>
                    <a href="/categories/Hadoop/" class="button">Hadoop</a>
                </div>
            </div>
            <!-- 二、右·位置 -->
            <aside class="post-side">
                <!-- 1. 文章目录 -->
                <div class="post-side__toc">
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81HFDS-%E6%A6%82%E8%BF%B0"><span class="toc-text">一、HFDS 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-HDFS-%E7%9A%84%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87%E5%92%8C%E4%B8%8D%E8%B6%B3"><span class="toc-text">1. HDFS 的设计目标和不足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-HDFS-%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-text">2. HDFS 的体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E5%9D%97%EF%BC%88block%EF%BC%89"><span class="toc-text">3. 数据块（block）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-NameNode-%E5%92%8C-SecondaryNameNode"><span class="toc-text">4. NameNode 和 SecondaryNameNode</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%85%83%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%EF%BC%88NameNode%EF%BC%89"><span class="toc-text">1) 元数据节点（NameNode）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-SecondaryNameNode%EF%BC%88%E8%BE%85%E5%8A%A9%E8%80%85-%C2%B7-%E5%85%83%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%EF%BC%89"><span class="toc-text">2) SecondaryNameNode（辅助者 · 元数据节点）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%EF%BC%88DataNode%EF%BC%89"><span class="toc-text">3) 数据节点（DataNode）</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BB%8E%E7%8E%B0%E6%9C%89%E9%9B%86%E7%BE%A4%E9%87%8C%E9%9D%A2%E5%8A%A8%E6%80%81%E5%A2%9E%E5%8A%A0%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%EF%BC%8C%E6%80%8E%E4%B9%88%E7%A0%B4%EF%BC%9F"><span class="toc-text">从现有集群里面动态增加一个数据节点，怎么破？</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E9%94%99%E8%AF%AF%E4%B8%8E%E6%81%A2%E5%A4%8D"><span class="toc-text">二、数据错误与恢复</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-block-%E6%8D%9F%E5%9D%8F%E5%A4%84%E7%90%86"><span class="toc-text">1. block 损坏处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-NameNode-%E5%92%8C-DataNode-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-text">2. NameNode 和 DataNode 错误处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-NameNode-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-text">1) NameNode 错误处理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81HDFS%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-text">三、HDFS的运行机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%89%AF%E6%9C%AC%E6%9C%BA%E5%88%B6"><span class="toc-text">1. 副本机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BF%83%E8%B7%B3%E6%9C%BA%E5%88%B6"><span class="toc-text">2. 心跳机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%89%AF%E6%9C%AC%E6%94%BE%E7%BD%AE%E4%B8%8E%E6%9C%BA%E6%9E%B6%E6%84%9F%E5%BA%94%E7%AD%96%E7%95%A5"><span class="toc-text">3. 副本放置与机架感应策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%89%AF%E6%9C%AC%E6%94%BE%E7%BD%AE"><span class="toc-text">1) 副本放置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9C%BA%E6%9E%B6%E6%84%9F%E5%BA%94%EF%BC%88rack-aware%EF%BC%89"><span class="toc-text">2) 机架感应（rack-aware）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%81%94%E9%82%A6%EF%BC%88Federation%EF%BC%89%E6%9C%BA%E5%88%B6"><span class="toc-text">4. 联邦（Federation）机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-HA%EF%BC%887-24%E5%B0%8F%E6%97%B6%E4%B8%8D%E4%B8%AD%E6%96%AD%E6%9C%8D%E5%8A%A1%EF%BC%89-%E6%9C%BA%E5%88%B6"><span class="toc-text">5. HA（7*24小时不中断服务） 机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%AE%89%E5%85%A8%E6%A8%A1%E5%BC%8F"><span class="toc-text">6. 安全模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6"><span class="toc-text">7. 垃圾回收</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81HDFS-%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">四、HDFS 的工作流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B"><span class="toc-text">1. 启动流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%AF%BB%E6%B5%81%E7%A8%8B"><span class="toc-text">2. 读流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%86%99%E6%B5%81%E7%A8%8B"><span class="toc-text">3. 写流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4%E6%B5%81%E7%A8%8B"><span class="toc-text">4. 删除流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8-HDFS-%E5%91%BD%E4%BB%A4%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="toc-text">1) 使用 HDFS 命令删除文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8-Java-API-%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="toc-text">2) 使用 Java API 删除文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81HDFS-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-text">五、HDFS 的基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-HDFS-%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C"><span class="toc-text">1. HDFS 命令行操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-HDFS-Java-API-%E6%93%8D%E4%BD%9C"><span class="toc-text">2. HDFS Java API 操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%96%B0%E5%BB%BA-Map-x2F-Reduce-%E9%A1%B9%E7%9B%AE%E5%92%8C%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-text">1) 新建 Map&#x2F;Reduce 项目和测试类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="toc-text">创建目录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0-Windows-%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6"><span class="toc-text">上传 Windows 本地文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E5%88%B0%E6%9C%AC%E5%9C%B0"><span class="toc-text">下载文件到本地</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%EF%BC%88%E6%88%96%E7%9B%AE%E5%BD%95%EF%BC%89"><span class="toc-text">删除文件（或目录）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-text">写入数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-text">读取数据</span></a></li></ol></li></ol></li></ol></li></ol>
                </div>
            </aside>
            <!-- 2. 小界面目录图标 -->
            <a class="btn-toc button" id="btn-toc" tabindex="0">
                <svg t="1662257293901" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="29423" width="55" height="55">
                    <path d="M480 64C214.848 64 0 278.848 0 544S214.848 1024 480 1024 960 809.152 960 544 745.152 64 480 64zM288 768C270.336 768 256 753.664 256 736S270.336 704 288 704 320 718.336 320 736 305.664 768 288 768zM288 576C270.336 576 256 561.664 256 544S270.336 512 288 512 320 526.336 320 544 305.664 576 288 576zM288 384C270.336 384 256 369.664 256 352S270.336 320 288 320 320 334.336 320 352 305.664 384 288 384zM672 768l-256 0C398.336 768 384 753.664 384 736S398.336 704 416 704l256 0c17.664 0 32 14.336 32 32S689.664 768 672 768zM672 576l-256 0C398.336 576 384 561.664 384 544S398.336 512 416 512l256 0C689.664 512 704 526.336 704 544S689.664 576 672 576zM672 384l-256 0C398.336 384 384 369.664 384 352S398.336 320 416 320l256 0C689.664 320 704 334.336 704 352S689.664 384 672 384z" p-id="43077" fill="#bfbfbf"></path>
            </svg>
            </a>
            <!-- 3. 小界面目录流 -->
            <div class="toc-menus" id="toc-menus">
                <div class="toc-title">
                    文章目录
                </div>
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81HFDS-%E6%A6%82%E8%BF%B0"><span class="toc-text">一、HFDS 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-HDFS-%E7%9A%84%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87%E5%92%8C%E4%B8%8D%E8%B6%B3"><span class="toc-text">1. HDFS 的设计目标和不足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-HDFS-%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-text">2. HDFS 的体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E5%9D%97%EF%BC%88block%EF%BC%89"><span class="toc-text">3. 数据块（block）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-NameNode-%E5%92%8C-SecondaryNameNode"><span class="toc-text">4. NameNode 和 SecondaryNameNode</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%85%83%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%EF%BC%88NameNode%EF%BC%89"><span class="toc-text">1) 元数据节点（NameNode）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-SecondaryNameNode%EF%BC%88%E8%BE%85%E5%8A%A9%E8%80%85-%C2%B7-%E5%85%83%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%EF%BC%89"><span class="toc-text">2) SecondaryNameNode（辅助者 · 元数据节点）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%EF%BC%88DataNode%EF%BC%89"><span class="toc-text">3) 数据节点（DataNode）</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BB%8E%E7%8E%B0%E6%9C%89%E9%9B%86%E7%BE%A4%E9%87%8C%E9%9D%A2%E5%8A%A8%E6%80%81%E5%A2%9E%E5%8A%A0%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%EF%BC%8C%E6%80%8E%E4%B9%88%E7%A0%B4%EF%BC%9F"><span class="toc-text">从现有集群里面动态增加一个数据节点，怎么破？</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E9%94%99%E8%AF%AF%E4%B8%8E%E6%81%A2%E5%A4%8D"><span class="toc-text">二、数据错误与恢复</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-block-%E6%8D%9F%E5%9D%8F%E5%A4%84%E7%90%86"><span class="toc-text">1. block 损坏处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-NameNode-%E5%92%8C-DataNode-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-text">2. NameNode 和 DataNode 错误处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-NameNode-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-text">1) NameNode 错误处理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81HDFS%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-text">三、HDFS的运行机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%89%AF%E6%9C%AC%E6%9C%BA%E5%88%B6"><span class="toc-text">1. 副本机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BF%83%E8%B7%B3%E6%9C%BA%E5%88%B6"><span class="toc-text">2. 心跳机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%89%AF%E6%9C%AC%E6%94%BE%E7%BD%AE%E4%B8%8E%E6%9C%BA%E6%9E%B6%E6%84%9F%E5%BA%94%E7%AD%96%E7%95%A5"><span class="toc-text">3. 副本放置与机架感应策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%89%AF%E6%9C%AC%E6%94%BE%E7%BD%AE"><span class="toc-text">1) 副本放置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9C%BA%E6%9E%B6%E6%84%9F%E5%BA%94%EF%BC%88rack-aware%EF%BC%89"><span class="toc-text">2) 机架感应（rack-aware）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%81%94%E9%82%A6%EF%BC%88Federation%EF%BC%89%E6%9C%BA%E5%88%B6"><span class="toc-text">4. 联邦（Federation）机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-HA%EF%BC%887-24%E5%B0%8F%E6%97%B6%E4%B8%8D%E4%B8%AD%E6%96%AD%E6%9C%8D%E5%8A%A1%EF%BC%89-%E6%9C%BA%E5%88%B6"><span class="toc-text">5. HA（7*24小时不中断服务） 机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%AE%89%E5%85%A8%E6%A8%A1%E5%BC%8F"><span class="toc-text">6. 安全模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6"><span class="toc-text">7. 垃圾回收</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81HDFS-%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">四、HDFS 的工作流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B"><span class="toc-text">1. 启动流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%AF%BB%E6%B5%81%E7%A8%8B"><span class="toc-text">2. 读流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%86%99%E6%B5%81%E7%A8%8B"><span class="toc-text">3. 写流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4%E6%B5%81%E7%A8%8B"><span class="toc-text">4. 删除流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8-HDFS-%E5%91%BD%E4%BB%A4%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="toc-text">1) 使用 HDFS 命令删除文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8-Java-API-%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="toc-text">2) 使用 Java API 删除文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81HDFS-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-text">五、HDFS 的基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-HDFS-%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C"><span class="toc-text">1. HDFS 命令行操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-HDFS-Java-API-%E6%93%8D%E4%BD%9C"><span class="toc-text">2. HDFS Java API 操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%96%B0%E5%BB%BA-Map-x2F-Reduce-%E9%A1%B9%E7%9B%AE%E5%92%8C%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-text">1) 新建 Map&#x2F;Reduce 项目和测试类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="toc-text">创建目录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0-Windows-%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6"><span class="toc-text">上传 Windows 本地文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E5%88%B0%E6%9C%AC%E5%9C%B0"><span class="toc-text">下载文件到本地</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%EF%BC%88%E6%88%96%E7%9B%AE%E5%BD%95%EF%BC%89"><span class="toc-text">删除文件（或目录）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-text">写入数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-text">读取数据</span></a></li></ol></li></ol></li></ol></li></ol>
            </div>
            <!-- 三、中·正文 -->
            <article class="post post__with-toc content-card">
                <!-- 1. 正文缩略图 -->
                <div class="post__header">
                </div>

                <!-- 2. 正文目录 -->
                    <details open>
                        <summary>
                            <div class="wenzhangmulu">文章目录</div>
                        </summary>
                        <div class="fold-content">
                            <div class="post-side__toc" style="padding-left: 35px;font-style: oblique;line-height: 2.5;">
                                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81HFDS-%E6%A6%82%E8%BF%B0"><span class="toc-text">一、HFDS 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-HDFS-%E7%9A%84%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87%E5%92%8C%E4%B8%8D%E8%B6%B3"><span class="toc-text">1. HDFS 的设计目标和不足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-HDFS-%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-text">2. HDFS 的体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E5%9D%97%EF%BC%88block%EF%BC%89"><span class="toc-text">3. 数据块（block）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-NameNode-%E5%92%8C-SecondaryNameNode"><span class="toc-text">4. NameNode 和 SecondaryNameNode</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%85%83%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%EF%BC%88NameNode%EF%BC%89"><span class="toc-text">1) 元数据节点（NameNode）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-SecondaryNameNode%EF%BC%88%E8%BE%85%E5%8A%A9%E8%80%85-%C2%B7-%E5%85%83%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%EF%BC%89"><span class="toc-text">2) SecondaryNameNode（辅助者 · 元数据节点）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%EF%BC%88DataNode%EF%BC%89"><span class="toc-text">3) 数据节点（DataNode）</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BB%8E%E7%8E%B0%E6%9C%89%E9%9B%86%E7%BE%A4%E9%87%8C%E9%9D%A2%E5%8A%A8%E6%80%81%E5%A2%9E%E5%8A%A0%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%EF%BC%8C%E6%80%8E%E4%B9%88%E7%A0%B4%EF%BC%9F"><span class="toc-text">从现有集群里面动态增加一个数据节点，怎么破？</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E9%94%99%E8%AF%AF%E4%B8%8E%E6%81%A2%E5%A4%8D"><span class="toc-text">二、数据错误与恢复</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-block-%E6%8D%9F%E5%9D%8F%E5%A4%84%E7%90%86"><span class="toc-text">1. block 损坏处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-NameNode-%E5%92%8C-DataNode-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-text">2. NameNode 和 DataNode 错误处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-NameNode-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-text">1) NameNode 错误处理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81HDFS%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-text">三、HDFS的运行机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%89%AF%E6%9C%AC%E6%9C%BA%E5%88%B6"><span class="toc-text">1. 副本机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BF%83%E8%B7%B3%E6%9C%BA%E5%88%B6"><span class="toc-text">2. 心跳机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%89%AF%E6%9C%AC%E6%94%BE%E7%BD%AE%E4%B8%8E%E6%9C%BA%E6%9E%B6%E6%84%9F%E5%BA%94%E7%AD%96%E7%95%A5"><span class="toc-text">3. 副本放置与机架感应策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%89%AF%E6%9C%AC%E6%94%BE%E7%BD%AE"><span class="toc-text">1) 副本放置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9C%BA%E6%9E%B6%E6%84%9F%E5%BA%94%EF%BC%88rack-aware%EF%BC%89"><span class="toc-text">2) 机架感应（rack-aware）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%81%94%E9%82%A6%EF%BC%88Federation%EF%BC%89%E6%9C%BA%E5%88%B6"><span class="toc-text">4. 联邦（Federation）机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-HA%EF%BC%887-24%E5%B0%8F%E6%97%B6%E4%B8%8D%E4%B8%AD%E6%96%AD%E6%9C%8D%E5%8A%A1%EF%BC%89-%E6%9C%BA%E5%88%B6"><span class="toc-text">5. HA（7*24小时不中断服务） 机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%AE%89%E5%85%A8%E6%A8%A1%E5%BC%8F"><span class="toc-text">6. 安全模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6"><span class="toc-text">7. 垃圾回收</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81HDFS-%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">四、HDFS 的工作流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B"><span class="toc-text">1. 启动流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%AF%BB%E6%B5%81%E7%A8%8B"><span class="toc-text">2. 读流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%86%99%E6%B5%81%E7%A8%8B"><span class="toc-text">3. 写流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4%E6%B5%81%E7%A8%8B"><span class="toc-text">4. 删除流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8-HDFS-%E5%91%BD%E4%BB%A4%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="toc-text">1) 使用 HDFS 命令删除文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8-Java-API-%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="toc-text">2) 使用 Java API 删除文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81HDFS-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-text">五、HDFS 的基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-HDFS-%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C"><span class="toc-text">1. HDFS 命令行操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-HDFS-Java-API-%E6%93%8D%E4%BD%9C"><span class="toc-text">2. HDFS Java API 操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%96%B0%E5%BB%BA-Map-x2F-Reduce-%E9%A1%B9%E7%9B%AE%E5%92%8C%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-text">1) 新建 Map&#x2F;Reduce 项目和测试类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="toc-text">创建目录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0-Windows-%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6"><span class="toc-text">上传 Windows 本地文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E5%88%B0%E6%9C%AC%E5%9C%B0"><span class="toc-text">下载文件到本地</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%EF%BC%88%E6%88%96%E7%9B%AE%E5%BD%95%EF%BC%89"><span class="toc-text">删除文件（或目录）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-text">写入数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-text">读取数据</span></a></li></ol></li></ol></li></ol></li></ol>
                            </div>
                        </div>
                    </details>
                <!-- 3. 正文文章 -->
                <div class="post__content">
                    <p>HDFS 是一个支持海量数据存储的分布式文件系统，是存储大数据文件的重要载体。本章主要介绍了 HDFS 的体系结构、运行机制、工作流程和基本操作。</p>
<h2 id="一、HFDS-概述"><a href="#一、HFDS-概述" class="headerlink" title="一、HFDS 概述"></a>一、HFDS 概述</h2><h3 id="1-HDFS-的设计目标和不足"><a href="#1-HDFS-的设计目标和不足" class="headerlink" title="1. HDFS 的设计目标和不足"></a>1. HDFS 的设计目标和不足</h3><blockquote>
<p>设计目标：</p>
<ol>
<li>支持超大文件存储</li>
<li>采用一次写入多次读取（write-once-read-many）访问模型</li>
<li>具有故障检测和快速自动恢复功能</li>
<li>采用流式数据访问</li>
<li>支持移动计算</li>
</ol>
</blockquote>
<blockquote>
<p>不足：</p>
<ol>
<li>不适合处理低延迟数据访问</li>
<li>无法高效存储大量小文件</li>
<li>不支持多用户写入和任意修改文件</li>
</ol>
</blockquote>
<h3 id="2-HDFS-的体系结构"><a href="#2-HDFS-的体系结构" class="headerlink" title="2. HDFS 的体系结构"></a>2. HDFS 的体系结构</h3><p>HDFS 是一个<strong>主&#x2F;从（master&#x2F;slave）</strong>架构的系统，即一个 HDFS 集群由一个 <strong>NameNode</strong> 和若干 <strong>DataNode</strong> 组成。它俩也是 HDFS 的<strong>核心组件</strong>，其中，NameNode 被称为“<strong>元数据节点</strong>”、另一个被称为“<strong>数据节点</strong>”。</p>
<h4 id="3-数据块（block）"><a href="#3-数据块（block）" class="headerlink" title="3. 数据块（block）"></a>3. 数据块（block）</h4><p>磁盘数据块是磁盘读写的最小单位，也只能读写块整倍大小的数据。HDFS 的默认数据块大小为 <strong>128MB</strong>。</p>
<blockquote>
<p>通常为512B，那为什么设置这么大？<strong>数据块越大，寻址开销越小</strong>。当然，盲目过大也不行，MapReduce 中的 Map 一次只处理一个块的内容，<strong>过大会导致整体任务量变少</strong>，进而影响数据的<strong>并行</strong>处理速度。</p>
</blockquote>
<blockquote>
<p>优点：<br>可以存储任意大小的数据文件，只要物理切片就可以。<br>简化了存储系统的管理：元数据信息和文件数据信息分开管理。<br>有利于实现分布式文件系统的容错性：一个节点出故障，其他块读取副本。<br>有利于实现负载军和并提高集群可靠性：某个数据节点的剩余空间低于临界点，就将这个数据节点移动到其他的数据节点上；此外，数据块的副本被安排在不同的机架上，即使丢失某台机架，读取副本即可，大大提高了集群的可靠性。与此同时，Hadoop 的故障检测和快速自动回复功能就可以及时将这些块副本数量恢复到正常水平。</p>
</blockquote>
<h4 id="4-NameNode-和-SecondaryNameNode"><a href="#4-NameNode-和-SecondaryNameNode" class="headerlink" title="4. NameNode 和 SecondaryNameNode"></a>4. NameNode 和 SecondaryNameNode</h4><h5 id="1-元数据节点（NameNode）"><a href="#1-元数据节点（NameNode）" class="headerlink" title="1) 元数据节点（NameNode）"></a>1) 元数据节点（NameNode）</h5><p>管理 HDFS 文件系统的命名空间（namespace）。其实就是 HDFS 的目录结构，用户可以进行增删改重命名等 HDFS 文件。</p>
<blockquote>
<p>所存储的元数据信息：</p>
<ol>
<li>文件名、目录名与层次关系</li>
<li>文件目录的属主和权限</li>
<li>每个文件由哪些数据块组成</li>
<li>数据块到数据节点的映射信息</li>
</ol>
</blockquote>
<p>元数据信息被持久化的存到本地磁盘的两个文件中：<strong>fsimage（元数据镜像文件）</strong>和 <strong>edits（事务日志文件）</strong>。</p>
<p>元数据节点正常运行时，所有更新操作被写入 edits 文件中，如果直接写入元数据镜像文件，逐渐一段时间后，过大会导致系统运行速度变慢。即 edits 文件越来越大，不会对系统有明显影响，但是元数据节点的重启过程会越来越慢。</p>
<h5 id="2-SecondaryNameNode（辅助者-·-元数据节点）"><a href="#2-SecondaryNameNode（辅助者-·-元数据节点）" class="headerlink" title="2) SecondaryNameNode（辅助者 · 元数据节点）"></a>2) SecondaryNameNode（辅助者 · 元数据节点）</h5><p>解决掉 edits 文件过大的问题。是对 元数据镜像文件和事务日志文件进行定期合并。由于合并时需要消耗内存，因此通常这俩<strong>没在一个节点</strong>上面。</p>
<blockquote>
<p>优点：</p>
<ol>
<li>提升了集群性能，保存了元数据节点的元数据信息，一定程度上提高了元数据的安全性和可靠性。</li>
</ol>
</blockquote>
<h5 id="3-数据节点（DataNode）"><a href="#3-数据节点（DataNode）" class="headerlink" title="3) 数据节点（DataNode）"></a>3) 数据节点（DataNode）</h5><p>一个数据节点有多个数据块，每个数据块会在多个数据节点上存储副本，但一个数据节点只能有一个副本。</p>
<blockquote>
<p>作用：<br>负责向<strong>客户端</strong>或<strong>元数据节点</strong>提供数据的检索和读写服务，并通过<strong>心跳机制</strong>定期向元数据节点发送自己的块列表信息。<br>一般情况下，数据节点会从磁盘中读取数据块，但如果某个块被频繁访问，系统会将其存放在数据节点的内存中。</p>
</blockquote>
<h6 id="从现有集群里面动态增加一个数据节点，怎么破？"><a href="#从现有集群里面动态增加一个数据节点，怎么破？" class="headerlink" title="从现有集群里面动态增加一个数据节点，怎么破？"></a>从现有集群里面动态增加一个数据节点，怎么破？</h6><p>—索引眼：<em>增加数据节点<strong>增加一个数据节点</strong>增加一个DataNode<strong>增加DataNode</strong>hadoop04**Hadoop04</em>—</p>
<h2 id="二、数据错误与恢复"><a href="#二、数据错误与恢复" class="headerlink" title="二、数据错误与恢复"></a>二、数据错误与恢复</h2><p>HDFS 的主要目标有一条是“具有故障检测和快速自动恢复功能”，这就要求即使再出错的情况下也要保证数据存储的可靠性。常见的出错情况包括block 损坏、NameNode 和 DataNode 的错误。</p>
<h3 id="1-block-损坏处理"><a href="#1-block-损坏处理" class="headerlink" title="1. block 损坏处理"></a>1. block 损坏处理</h3><p><strong>网络传输错误</strong>和<strong>机器硬件故障</strong>等因素会造成数据损坏。<br>客户端在读取文件时会对每个读取的块进行校验，如果出错，就会读取其他数据节点上的数据块，并将错误块报告给元数据节点，元数据节点随后会重新复制。<br>此外，每一个数据节点都会开启一个<strong>块扫描进程</strong>，来定期验证块的正确性，不正确会报告给元数据节点进行处理。</p>
<h3 id="2-NameNode-和-DataNode-错误处理"><a href="#2-NameNode-和-DataNode-错误处理" class="headerlink" title="2. NameNode 和 DataNode 错误处理"></a>2. NameNode 和 DataNode 错误处理</h3><h4 id="1-NameNode-错误处理"><a href="#1-NameNode-错误处理" class="headerlink" title="1) NameNode 错误处理"></a>1) NameNode 错误处理</h4><p>NameNode 上保存了元数据信息，仅此一份独一无二，因此必须确保该安全。</p>
<blockquote>
<p>容错方式有以下三种：</p>
<ol>
<li>元数据信息持久化到本地磁盘并同步到 NFS 中，但会因网络带宽等原因造成元数据丢失。</li>
<li>运行 SecondaryNameNode。但由于该备份的元数据信息滞后于 NameNode，所以也会丢失掉部分的数据信息。</li>
<li>启用主备两个NameNode。</li>
</ol>
</blockquote>
<h2 id="三、HDFS的运行机制"><a href="#三、HDFS的运行机制" class="headerlink" title="三、HDFS的运行机制"></a>三、HDFS的运行机制</h2><h3 id="1-副本机制"><a href="#1-副本机制" class="headerlink" title="1. 副本机制"></a>1. 副本机制</h3><blockquote>
<p>作用：<br>为了维护爱与和平…咳咳串台了，再来！为了保证集群的容错性和可用性。</p>
</blockquote>
<h3 id="2-心跳机制"><a href="#2-心跳机制" class="headerlink" title="2. 心跳机制"></a>2. 心跳机制</h3><p>NameNode 启动后，会等待所有 DataNode 的“心跳”：DataNode 每隔一定间隔（默认三秒）主动向 NameNode 发送“心跳”，主动报告自己的状态信息。然后 NameNode 通过心跳向 DataNode 下达命令。<br>如果长时间未收到，则可以证明该 DataNode 宕机，然后检查该 DataNode 上的块副本信息并备份到其他的 DataNode 上。<br>对了，DataNode 会给主备主数据节点都会发送“心跳”。</p>
<h3 id="3-副本放置与机架感应策略"><a href="#3-副本放置与机架感应策略" class="headerlink" title="3. 副本放置与机架感应策略"></a>3. 副本放置与机架感应策略</h3><h4 id="1-副本放置"><a href="#1-副本放置" class="headerlink" title="1) 副本放置"></a>1) 副本放置</h4><p>一个集群中多个机架，每个机架上多个数据节点，每个数据节点保存多个块副本。另外，元数据节点的元数据存储着每个数据节点所属的机架 ID。那么，如何分配文件的块副本到集群中的数据节点上面呢？</p>
<p>默认下，副本的配置数为 3，其中，有两个被放在同一机架的不同数据节点上面，另外一个被另一个机架上。</p>
<blockquote>
<p>一般情况下，3 个足矣。若大于等于 3，则之后的副本可以随意放置。避免一个机架有太多同意副本即可。</p>
</blockquote>
<h4 id="2-机架感应（rack-aware）"><a href="#2-机架感应（rack-aware）" class="headerlink" title="2) 机架感应（rack-aware）"></a>2) 机架感应（rack-aware）</h4><p>由于副本的存放位置会影响 HDFS 的可靠性和性能，HDFS 采用了一种机架感知策略来提高数据的可靠性，并提高网络带宽的利用率。<br>这样一来，即使一个机架发生故障，由于其他机架上的副本仍然可用，不会影响数据的可靠性。另外，当读取数据时，应用程序可用在多个机架上同时读取，大大提高数据的读取速度。</p>
<h3 id="4-联邦（Federation）机制"><a href="#4-联邦（Federation）机制" class="headerlink" title="4. 联邦（Federation）机制"></a>4. 联邦（Federation）机制</h3><p>每个文件的元数据信息都需要保存到 NameNode 的内存中，于是便有了联邦机制。</p>
<blockquote>
<p>作用：<br>集群横向扩展的方式解决 NameNode 的瓶颈问题，即<strong>增加元数据节点的数量</strong>。<br>由于 Hadoop 针对海量数据进行存储管理，并采用了数据冗余存储方式，所以<strong>磁盘I&#x2F;O才是集群的《主要瓶颈》。</strong></p>
</blockquote>
<p>在联邦机制中，每个 NameNode 分别管理文件系统命名口径的一部分（命名空间卷）。各卷中分别存储了命名空间的元数据和文件数据块的块池。同时，各卷相互独立互不影响互不通信。此外，集群中的所有 DataNode 都必须注册到各个 NameNode。</p>
<p>不过，没有解决掉单点故障问题，若某一个 NameNode 失效，仍无法恢复无法访问。</p>
<h3 id="5-HA（7-24小时不中断服务）-机制"><a href="#5-HA（7-24小时不中断服务）-机制" class="headerlink" title="5. HA（7*24小时不中断服务） 机制"></a>5. HA（7*24小时不中断服务） 机制</h3><p>所谓HA，即高可用（7*24小时不中断服务）。实现高可用最关键的是消除单点故障。<br>方式：允许运行主备两个 NameNode，当 NameNode 节点发生故障时，可以快速启用备用的 NameNode，以确保集群正常运行。</p>
<p>备主数据节点和主主数据节点始终同步（元数据信息一致），它们之间通过 JournalNode 守护进程进行通信。</p>
<h3 id="6-安全模式"><a href="#6-安全模式" class="headerlink" title="6. 安全模式"></a>6. 安全模式</h3><p>启用后，就进入了安全模式。该模式下，主数据节点会检查块的完整性。此外，它还是一种只读模式。<br>正常情况下，NameNode启动（额外延迟30s）就会退出安全模式，但是如果DataNode 丢失的数据块超过设定的值，集群就会一直处于安全模式。</p>
<p>两件事</p>
<ol>
<li>等待每个数据节点的心跳，判断是否宕机，然后NameNode 将 DataNode 所发送的 block 报告与其元数据进行对比，以判断数据块是否正常。</li>
<li>在内存中加载 fsimage，然后将 fsimage 和edits 合并成新的 fsimage，并创建一个新的 edits。合并完成后删除旧的 fsimage 和 edits，并将新的俩重命名。<h3 id="7-垃圾回收"><a href="#7-垃圾回收" class="headerlink" title="7. 垃圾回收"></a>7. 垃圾回收</h3>没有任何利用价值的块副本被认为是垃圾：若一个文件被删除，那么备份的该文件副本也就没有用。<br>删除不会直接删除，会移动到回收站。<h2 id="四、HDFS-的工作流程"><a href="#四、HDFS-的工作流程" class="headerlink" title="四、HDFS 的工作流程"></a>四、HDFS 的工作流程</h2>在 Hadoop 集群中，<strong>客户端</strong>与<strong>元数据节点</strong>之间的通信、<strong>元数据节点</strong>与<strong>数据节点</strong>之间的通信、<strong>数据节点</strong>相互之间的通信、都是基于 <strong>RPC（远程过程调用）</strong>机制的。</li>
</ol>
<h3 id="1-启动流程"><a href="#1-启动流程" class="headerlink" title="1. 启动流程"></a>1. 启动流程</h3><p>在 HDFS 的启动过程中，需要启动 NameNode 和DataNode。<br>启动时，会先进入安全模式。<br>数据节点启动时，会开启一个 DataBlockScanner 进程来扫描 block，并且由该进程定期向各个 NameNode 发送“心跳”。</p>
<h3 id="2-读流程"><a href="#2-读流程" class="headerlink" title="2. 读流程"></a>2. 读流程</h3><p>Client 读取时，首先会访问 NameNode 以确认是否可以读取。是，则 Client 获得文件的 block 和 DataNode 信息，然后执行 HDFS 的读操作来获取数据。在读取数据结束后，需要关闭文件输入流。</p>
<h3 id="3-写流程"><a href="#3-写流程" class="headerlink" title="3. 写流程"></a>3. 写流程</h3><p>Client 将数据预备写入到 HDFS 文件时，首先会访问 NameNode 确认写入的权限和文件是否存在（存在是否覆盖）。是，Client 在 NameNode 上创建写入文件的元数据信息，并返回可存储数据的 block 和 DataNode 信息，然后根据返回信息执行副本复制过程。写入结束后，需要关闭文件输出流。</p>
<h3 id="4-删除流程"><a href="#4-删除流程" class="headerlink" title="4. 删除流程"></a>4. 删除流程</h3><h4 id="1-使用-HDFS-命令删除文件"><a href="#1-使用-HDFS-命令删除文件" class="headerlink" title="1) 使用 HDFS 命令删除文件"></a>1) 使用 HDFS 命令删除文件</h4><p>root 用户的回收站目录为 <code>hdfs://hadoop0:9000/user/root/.Trash</code>。<br>当用户使用 HDFS 命令执行删除操作后，系统会将需要删除的文件移动到回收站内的“&#x2F;Current”下。例如，root用户删除了“koinl01.txt”文件，就可以在 <code>hdfs://hadoop0:9000/user/root/.Trash/Current/koinl01.txt</code> 找到。<br>回收站也是有时间周期滴。</p>
<h4 id="2-使用-Java-API-删除文件"><a href="#2-使用-Java-API-删除文件" class="headerlink" title="2) 使用 Java API 删除文件"></a>2) 使用 Java API 删除文件</h4><p>需要有一段延迟时间，才可以真正删除掉。</p>
<h2 id="五、HDFS-的基本操作"><a href="#五、HDFS-的基本操作" class="headerlink" title="五、HDFS 的基本操作"></a>五、HDFS 的基本操作</h2><p>基本操作包括：创建文件、移动文件、查看文件目录、读取文件等</p>
<h3 id="1-HDFS-命令行操作"><a href="#1-HDFS-命令行操作" class="headerlink" title="1. HDFS 命令行操作"></a>1. HDFS 命令行操作</h3><table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">解析</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">hdfs dfs -help</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">hdfs dfs -ls &#x2F;</td>
<td align="center">查看HDFS根目录下目录和文件</td>
<td align="center">-R选项递归展示</td>
</tr>
<tr>
<td align="center">hdfs dfs -mkdir &#x2F;mywork</td>
<td align="center">根目录下创建文件夹</td>
<td align="center">-p选项多级目录</td>
</tr>
<tr>
<td align="center">hdfs dfs -put a.txt &#x2F;mywork</td>
<td align="center">虚拟机本地文件上传到HDFS中</td>
<td align="center">-f 强制覆盖</td>
</tr>
<tr>
<td align="center">hdfs dfs -get &#x2F;mywork&#x2F;a.txt &#x2F;root&#x2F;Downloads</td>
<td align="center">HDFS中文件下载到虚拟机本地</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">hdfs dfs -cp &#x2F;mywork&#x2F;a.txt &#x2F;mywork&#x2F;t1</td>
<td align="center">HDFS中文件复制到目录</td>
<td align="center">若复制到文件，即复制+重命名</td>
</tr>
<tr>
<td align="center">hdfs dfs -mv &#x2F;mywork&#x2F;a.txt &#x2F;input&#x2F;</td>
<td align="center">HDFS中文件移动到目录</td>
<td align="center">若移动到文件，即移动+重命名</td>
</tr>
<tr>
<td align="center">hdfs dfs -cat &#x2F;input&#x2F;word.txt</td>
<td align="center">HDFS中查看文件内容</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">hdfs dfs -rm &#x2F;imput&#x2F;a.txt</td>
<td align="center">HDFS中删除文件</td>
<td align="center">-r选项删除目录</td>
</tr>
<tr>
<td align="center">hdfs dfs -df&#x2F;</td>
<td align="center">查看HDFS可用空间</td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="2-HDFS-Java-API-操作"><a href="#2-HDFS-Java-API-操作" class="headerlink" title="2. HDFS Java API 操作"></a>2. HDFS Java API 操作</h3><p>使用 HDFS Java API 可以远程对 HDFS 中文件进行创建、上传、下载、删除、读写等操作。</p>
<h4 id="1-新建-Map-x2F-Reduce-项目和测试类"><a href="#1-新建-Map-x2F-Reduce-项目和测试类" class="headerlink" title="1) 新建 Map&#x2F;Reduce 项目和测试类"></a>1) 新建 Map&#x2F;Reduce 项目和测试类</h4><h5 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h5><p>在 Testfiles 类中添加一个<strong>用于创建目录</strong>的 createDir() 测试方法，该方法可以创建新目录<br>。</p>
<h5 id="上传-Windows-本地文件"><a href="#上传-Windows-本地文件" class="headerlink" title="上传 Windows 本地文件"></a>上传 Windows 本地文件</h5><p>在 Testfiles 类中添加一个<strong>用于上传文件</strong>的 putFiles() 测试方法，该方法用于从 Windows 系统本地上传多个文件到集群。</p>
<h5 id="下载文件到本地"><a href="#下载文件到本地" class="headerlink" title="下载文件到本地"></a>下载文件到本地</h5><p>在 Testfiles 类中添加一个<strong>用于下载文件</strong>的 getFiles() 测试方法，该方法通过正则表达式过滤出以“txt”为文件扩展名的文件并下载。</p>
<h5 id="删除文件（或目录）"><a href="#删除文件（或目录）" class="headerlink" title="删除文件（或目录）"></a>删除文件（或目录）</h5><p>在 Testfiles 类中添加一个<strong>用于删除文件（或目录）</strong>的 deleteFiles() 测试方法，该方法用于从 HDFS 中删除文件（或目录）。</p>
<h5 id="写入数据"><a href="#写入数据" class="headerlink" title="写入数据"></a>写入数据</h5><p>在 Testfiles 类中添加一个<strong>用于写入数据到文件</strong>的 writeHDFS() 测试方法，该方法用于向 HDFS 中写入文件。</p>
<h5 id="读取数据"><a href="#读取数据" class="headerlink" title="读取数据"></a>读取数据</h5><p>在 Testfiles 类中添加一个<strong>用于读取文件数据</strong>的 readHDFS() 测试方法，该方法可以分行读取文件数据。</p>

                </div>
                <!-- 4. 正文更新时间 -->
                <div class="post-footer__meta">
                    <p>更新于  2022-09-15 20:40:46 星期四</p>
                </div>
            </article>



            <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.js"></script>
            <script type="text/javascript">$(".highlight").wrap("<div class='code-wrapper' style='position:relative'></div>");!function (e, t, a) {var initCopyCode = function () {var copyHtml = '';copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';copyHtml += '  <i class="fa fa-clipboard"></i><span>复制</span>';copyHtml += '</button>';$(".highlight .code").before(copyHtml);var clipboard = new ClipboardJS('.btn-copy', {target: function (trigger) {return trigger.nextElementSibling;}});clipboard.on('success', function (e) {e.trigger.innerHTML = "<i class='fa fa-clipboard'></i><span>复制成功</span>";setTimeout(function () {e.trigger.innerHTML = "<i class='fa fa-clipboard'></i><span>复制</span>"}, 1000);e.clearSelection();});clipboard.on('error', function (e) {e.trigger.innerHTML = "<i class='fa fa-clipboard'></i><span>复制失败</span>";setTimeout(function () {e.trigger.innerHTML = "<i class='fa fa-clipboard'></i><span>复制</span>"}, 1000);e.clearSelection();});};initCopyCode();}(window, document);</script>
        </main>

        <footer class="footer">
            <a href="#" class="button" id="b2t" title="回到顶部">
                <svg t="1662256713839" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="3050" width="50" height="50">
                    <path d="M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0zM697.6 582.4 627.2 582.4c-12.8 0-19.2 6.4-19.2 19.2l0 108.8c0 6.4-6.4 12.8-12.8 12.8L428.8 723.2c-6.4 0-12.8-6.4-12.8-12.8L416 595.2c0-6.4-6.4-19.2-19.2-19.2L326.4 576C320 582.4 320 576 320 576l179.2-172.8c6.4-6.4 12.8-6.4 19.2 0L704 576C704 576 704 582.4 697.6 582.4zM704 364.8 320 364.8c-19.2 0-32-12.8-32-32S300.8 300.8 320 300.8l384 0c19.2 0 32 12.8 32 32S723.2 364.8 704 364.8z"
                        p-id="3051" fill="#bfbfbf"></path>
                </svg>
            </a>
            <p class="footer-copyright">Copyright © 2022&nbsp;-&nbsp;2022 Koi_NL</p>
            <p class="poems_of_today"><span id="jinrishici-sentence">悟已往之不谏，知来者之可追。</span><script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script></p>
            <p class="desc-footer-koinl">本博客由 Hexo 驱动，采用 starter 模板，使用 Cards 主题。后逐步添加记录。做博客不易，本博客仅为个人笔记使用，不用打赏机制，不做商业用途。</p>
        </footer>
    </div>
    <script>document.onreadystatechange=function(){console.log(document.readyState);if(document.readyState!="complete"){$(".app").fadeOut();}}</script>
</body>
</html>