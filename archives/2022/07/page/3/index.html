<!DOCTYPE html>
<html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init">
<head>
  <meta charset="utf-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <link rel="icon" href="/favicon.ico">
  
  <title>锦鲤未离</title>
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/lib/fancybox/jquery.fancybox-1.3.4.css">

  <!--在这里倒入jquery 方便处理部分页面的jquery-->
  <script src="https://cdn.staticfile.org/jquery/1.7/jquery.min.js" type="text/javascript" ></script>
<meta name="generator" content="Hexo 6.1.0"></head>
<body class="home">
	<header class="site-header navfixed-false">
  <div class="container">
      <h1><a href="/" title="锦鲤未离"><span class="octicon octicon-mark-github"></span> 锦鲤未离</a></h1>
      <nav class="site-header-nav" role="navigation">
        
              
              <a href="/"  class=" site-header-nav-item hvr-underline-from-center" title="Home">Home</a>
        
              
              <a href="/categories/"  class=" site-header-nav-item hvr-underline-from-center" title="Category">Category</a>
        
              
              <a href="/open-source/"  class=" site-header-nav-item hvr-underline-from-center" title="Open-Source">Open-Source</a>
        
              
              <a href="/message/"  class=" site-header-nav-item hvr-underline-from-center" title="Message">Message</a>
        
      </nav>
  </div>
</header>

	<section class="banner-false">
    <div class="collection-head">
        <div class="container">
            <div class="collection-title">
                <h1 class="collection-header" id="site-description">
                    
                </h1>
                <div class="collection-info">
                    
                    
                        <span class="meta-info">
                            
                                <span class="octicon octicon-location">
                                   
                                        ChengDu, China
                                    
                                </span>
                                
                            
                        </span>
                    
                        <span class="meta-info">
                            
                                <span class="octicon octicon-mark-github">
                                   
                                </span>
                                
                                    <a href="http://github.com/yumemor" target="_blank">yumemor</a>
                                
                            
                        </span>
                    
                </div>
            </div>
        </div>
    </div>
</section>
	   <section class="container">
    <div class="columns">
        <div class="column two-thirds">
            
                  <article id="post-过去半年前的学习部分/2021-2022年课程/202201SQL_Server/SqlServer第十三章  大规模数据库架构" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/posts/sqlserver13/">『SQL Server』第十三章  大规模数据库架构</a>
  

      </h3>
      <div class="repo-list-description">
        
          <h1 id="第十三章-大规模数据库架构"><a href="#第十三章-大规模数据库架构" class="headerlink" title="第十三章  大规模数据库架构"></a>第十三章  大规模数据库架构</h1><p>1.分布式数据库:物理上分散,逻辑上集中<br>目标:本地自治,非集中式管理,高可用性(最基本特征)<br>                    位置独立性,分片独立性,复制独立性(分布透明性)<br>                    分布式查询,事务管理(复杂性)<br>                数据分布:数据分片:水平,垂直,导出,混合<br>                         数据分配:集中,分割(更新事务),全复制(事务更新少,数据少),混合<br>                体系结构:全局外模式<br>                        全局概念模式<br>                        分片模式<br>                        分配模式<br>                        局部概念模式<br>                        局部内模式<br>                        局部数据库<br>2.并行数据库:结构:共享内存结构<br>                  共享磁盘结构<br>                  无共享结构<br>                  层次结构<br>              数据划分与并行计算:合理划分可以使响应速度变化,处理性能更优<br>数据划分:一维数据划分:轮转法:整个关系<br>                                    散列法:点查询,连接查询,散列函数选择是关键点<br>                                    范围划分法:范围查询,点查询数据分布不均匀<br>                      多维数据划分:MAGIC多维划分法<br>                                  CMD多维划分法<br>                                  BERD多维划分法<br>               并行算法:并行排序<br>                        并行连接:划分连接,分片-复制连接<br>                        其他的关系操作:选择,除重,投影,聚集<br>3.云数据库:服务类型:IaaS:将基础设施作为服务<br>                    PaaS:将平台作为服务<br>SaaS:将软件作为服务</p>
<p>分布式查询:导致数据传输量大的主要原因是数据间的连接操作和 并 操作,半连接操作可用减少场地之间的数据传输量<br>分布式事务管理:恢复控制:基于 两 阶段 的提交协议,协调者与参与者<br>              并发控制:封锁协议:三级封锁协议<br>          为了保证全局事务的原子性，参与事务执行的所有场地或者全部提交，或者全 回滚 &#x2F; 撤销 。<br>两阶段封锁协议保证事务的调度可串行性<br>第二节：并行数据库<br>共享内存, 共享磁盘, 无共享, 层次结构<br>数据划分与并行计算:合理划分可以使响应速度变化,处理性能更优<br>:一维数据划分<br>多维数据划分<br>  轮转法；整体扫描<br>  散列划分：根据A属性划分<br>  范围划分：根据B属性取值区间<br>第三节：云计算数据库架构<br>云计算通过集中所有的计算资源，采用硬件 虚拟化 技术，为使用者提供强大的计算能力、存储和宽带等资源。<br>第四节 ：XML数据库</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2022-07-17T01:14:49.636Z" itemprop="datePublished">2022-07-17</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/SqlServer/' title=''>SqlServer</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-过去半年前的学习部分/2021-2022年课程/202201SQL_Server/SqlServer第三章  数据库结构设计" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/posts/sqlserver03/">『SQL Server』第三章  系统设计</a>
  

      </h3>
      <div class="repo-list-description">
        
          <h1 id="第三章-系统设计"><a href="#第三章-系统设计" class="headerlink" title="第三章  系统设计"></a>第三章  系统设计</h1><p>数据模型三个要素:<br>数据结构:关联关系<br>数据操作:增删改查<br>数据完整性约束:完整性<br>关系数据库的试图提供了逻辑数据独立性<br>在衡量数据库应用系统的性能指标中,???指的是系统在单位时间内可以完成的数据库事务数量<br>答案:系统吞吐量</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2022-07-17T01:14:49.629Z" itemprop="datePublished">2022-07-17</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/SqlServer/' title=''>SqlServer</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-过去半年前的学习部分/2021-2022年课程/202201SQL_Server/SqlServer第七章  高级数据库查询" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/posts/sqlserver07/">『SQL Server』第七章  高级数据库查询</a>
  

      </h3>
      <div class="repo-list-description">
        
          <h1 id="第七章-高级数据库查询"><a href="#第七章-高级数据库查询" class="headerlink" title="第七章  高级数据库查询"></a>第七章  高级数据库查询</h1><p>select [distinct top 3 [percent] with ties] col_name<br>into ntb_name<br>form tb_name<br>where<br>group by<br>having<br>order by<br>compute<br>函数:选择函数:case when then…else end<br>日期函数:<br>排名函数:rank:1 2 2 4 4 4 7<br>dense_rank:1 2 2 3 3 3 4<br>row_number:<br>ntile:<br>运算:union  intersect except<br>子查询:where col_name not in (select col_name…)<br>where col_name not exists (select *…)<br>any all<br>开窗函数:over (partition by col_name)<br>共用表表达式 with…as</p>
<p>自连接与外连接<br>SELECT DISTINCT TOP 3 WITH TIES col_name<br>INTO new_tb_name FROM tb_name<br>WHERE…<br>GROUP BY… HAVING…<br>ORDER BY<br>COMPUTE</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2022-07-17T01:14:49.624Z" itemprop="datePublished">2022-07-17</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/SqlServer/' title=''>SqlServer</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-过去半年前的学习部分/2021-2022年课程/202201SQL_Server/SqlServer第六章  数据库及其对象" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/posts/sqlserver06/">『SQL Server』第六章  数据库及其对象.md</a>
  

      </h3>
      <div class="repo-list-description">
        
          <h1 id="第六章-数据库及其对象"><a href="#第六章-数据库及其对象" class="headerlink" title="第六章  数据库及其对象"></a>第六章  数据库及其对象</h1><h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><ol>
<li>分类:系统数据库:master:数据库系统信息　　 　　　   　　<br>msdb:数据库作业信息　　 　　　   　　<br>model:数据库模板信息　　　 　　 　　<br>resource:只读数据库且不可见　　 　　　   　　<br>tempdb:临时数据库<br>　    　用户数据库:数据文件:主要数据文件:.mdf<br> 　　　     　　　  　　  　　　次要数据文件:.ndf　 　　　 　　　日志文件:事务日志文件:.ldf</li>
<li>创建:<code>create database</code> db_name　　<code>on　primary</code>　　<code>(</code>&lt;filespec&gt;<code>)</code>　　<code>log on</code>　　<code>(</code>&lt;filespec&gt;<code>)</code></li>
</ol>
<p><em>对&lt;filespec&gt;的解释:<code>name=</code>db_name_data<code>,</code>　　　　　　 　   　<code>filename=&#39;</code>C:\db_name_data.mdf<code>&#39;,</code>　　　　　 　 　　<code>size=</code>3MB<code>,</code>　　　　　 　 　　<code>maxsize=</code>{50MB|unlimited}<code>,</code>　　　　　 　 　　<code>filegrowth=</code>{1MB|10%}</em><br>要插入的表已存在: insert into t2 select * from t1<br>3. 修改:<code>alter database</code> db_name<br>　　 <code>add file</code>　　 <code>add log file</code><br>　　 <code>modify name=</code>　　 <code>modify file</code><br>　　 <code>remove file</code><br>4. 分离:<code>exec sp_detach_db &#39;</code>db_name<code>&#39;,&#39;true&#39;</code><br>5. 附加:<br>6. 自增标识列:identity</p>
<h2 id="架构-构架-模式"><a href="#架构-构架-模式" class="headerlink" title="架构(构架)(模式)"></a>架构(构架)(模式)</h2><ol>
<li>创建:    <code>create schema</code> sc_name</li>
<li>可以共享<h2 id="分区表"><a href="#分区表" class="headerlink" title="分区表"></a>分区表</h2></li>
<li>创建:例:在分区列<font color="blue">colA_name</font>(<font color="green">int</font>)上创建左侧分区函数.　　　(1)创建分区函数:<code>create partition function</code> pf_name<code>(</code><font color="green">int</font><code>)</code><br>　　　 　　 　　　　　<code>as range</code> left <code>for values(</code>1,10,100<code>）</code>　　　(2)创建分区方案:<code>create partition scheme</code> ps_name　　　　　 　　 　　　<code>as partition</code> pf_name　　　　　　　 　 　　<code>to (</code>test1,test2,test3,test4<code>)</code>　　　(3)使用分区建表:<code>create table</code> tb_name　　　　　　　 　  　　<code>(</code>col_name type… 　　　　　　 　　 　　<code>on</code> ps_name<code>(</code><font color="blue">colA_name</font><code>)</code></li>
</ol>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><ol>
<li>创建:<code>create [unique | [non]clustered] index</code> idx_name　 　<code>on</code> tb_name<code>(</code>col_name<code>)</code>　 　<code>[with fillfactor=</code>x<code>]</code></li>
<li>重复小列在前<br>主索引为主键索引,辅索引提高查询效率,位图索引用于范围查询，哈希索引用于精确查询<h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2></li>
<li>索引视图来源必须是基本表,不适合建立在大量更新写操作高基数度的数据聚合(group by)</li>
</ol>
<p>讲一起使用的公共列值的多个表的数据行存储在一起的方法称为聚集</p>
<p>设商品表有下列查询:<br>SELECT 商品号,商品名,单价<br>FROM 商品表 WHERE 类别 IN(‘食品’,’家电’)<br>ORDER BY 商品号<br>现建立索引:<br>CREATE INDEX idx1 ON 商品表(商品号)    # create unique index idx_name on tb_name(列名)<br>INCLUDE(商品名,单价)    # include(属性)<br>WHERE 类别&#x3D;’食品’ OR 类别&#x3D;’单价’    # where 约束条件</p>
<p>将 t1 表的 c1 列 (int 类型)定义为标识列,初量和增量均为1<br>CREATE TABLE t1(c1 INT IDENTITY(1,1),…)</p>
<p>直接增加已有文件的大小是扩大数据库空间的一种方法<br>ALTER DATABASE db1 MODIFY FILE(NAME&#x3D;db_datafile,SIZE&#x3D;200MB)</p>
<p>数据库的分类分为系统数据库和用户数据库。<br>系统数据库分为master，msdb，tempdb，model，resource，其分别保存系统信息，作业信息，临时信息，模板，只读，无法看到<br>将数据库以文件形式保存。分为数据文件和日志文件。<br>数据文件分为主要数据文件（mdf只要一个，≥3）和次要数据文件（ndf，n个）<br>日志文件（ldf，≥1）<br>数据库存储空间的分配：<br>文件组：主文件组和用户文件组</p>
<h1 id="一、创建及维护数据库"><a href="#一、创建及维护数据库" class="headerlink" title="一、创建及维护数据库"></a>一、创建及维护数据库</h1><h2 id="1-SQL-Server五个数据库"><a href="#1-SQL-Server五个数据库" class="headerlink" title="1. SQL Server五个数据库"></a>1. SQL Server五个数据库</h2><pre><code>master:记录所有系统信息，包括实例范围的元数据、端点、连接服务器和系统配置设置。还记录了所有其他数据库的存在、数据库文件的位置以及SQLServer的初始化信息
model：用作实例上创建的所有数据库的模板。当用户创建一个数据库时，系统将自动将Model数据库中的全部内容复制到新建数据库中
temodb:临时数据库，用于保存临时对象或中间结果集，并未数据的排序等操作提供一个临时工作空间
msdb:供SQL Server 代理服务调度博阿金和作业以及记录操作员时使用，保存关于调度报警、作业、操作员等信息。作业是在SQLserver中定义的自动执行的一系列操作的几何，作业的执行不需要人工干预
Resource：是一个只读数据库，包含了所有系统对象，SQLServer系统对象在物理上保存在Resource数据库中，但在逻辑上却显示在每个数据库的sys架构中
</code></pre>
<h2 id="2-组成"><a href="#2-组成" class="headerlink" title="2 组成"></a>2 组成</h2><p>（1）数据文件</p>
<p>主要数据文件<br>拓展名.mdf,要求不能小于3M，大于model数据库的大小<br>次要数据文件<br>拓展名.ndf<br>（2）日志文件<br>拓展名.ldf<br>（3）数据库存储空间的分配<br>在SQLServer中，数据的存储分配单位是数据页，一页是一块8KB&#x3D;（8060B+132B，8060是存放数据，132存放系统信息）的连续磁盘空间</p>
<h2 id="3-数据库文件组"><a href="#3-数据库文件组" class="headerlink" title="3 数据库文件组"></a>3 数据库文件组</h2><p>（1）主文件组<br>（2）用户定义文件组<br>通过create DataBase 或 Alter DataBase 语句中使用Filegroup 关键字指定的任何文件组</p>
<h2 id="4-数据库文件的属性"><a href="#4-数据库文件的属性" class="headerlink" title="4 数据库文件的属性"></a>4 数据库文件的属性</h2><pre><code>文件名及其位置
    一般情况下，如果有多个数据文件的话，为了获得更好的性能，建议将文件分散存储在多个物理磁盘上
初始大小
    在指定主要数据文件的初始大小时，其大小不能小于model数据库主要文件的大小
增长方式
最大大小
    是指文件增长的最大空间限制
</code></pre>
<h2 id="5-T-SQL创建数据库"><a href="#5-T-SQL创建数据库" class="headerlink" title="5 T-SQL创建数据库"></a>5 T-SQL创建数据库</h2><p>Create Database database_name<br>ON Primary%指定主文件组<br>(Name &#x3D;主文件名<br>FileName &#x3D;操作系统物理文件名<br>Size &#x3D; 文件的初始大小<br>Maxsize &#x3D; 文件最大值<br>FileGrowth &#x3D;指定文件的自动增量<br>)<br>LOG %指定日志文件<br>(Name &#x3D;<br>FileName &#x3D;<br>Size &#x3D;<br>Maxsize &#x3D;<br>FileGrowth &#x3D;<br>)<br>FileGroup<br>(Name &#x3D;<br>FileName &#x3D;<br>Size &#x3D;<br>Maxsize &#x3D;<br>FileGrowth &#x3D;<br>)</p>
<h2 id="6-修改数据库"><a href="#6-修改数据库" class="headerlink" title="6 修改数据库"></a>6 修改数据库</h2><p>（1）扩大数据库空间</p>
<p>添加数据文件<br>Alter DataBase database_name<br>ADD File(Name &#x3D;<br>FileName &#x3D;<br>Size &#x3D;<br>Maxsize &#x3D;<br>FileGrowth &#x3D;)<br>添加日志文件<br>Alter DataBase database_name<br>ADD LOG File(Name &#x3D;<br>FileName &#x3D;<br>Size &#x3D;<br>Maxsize &#x3D;<br>FileGrowth &#x3D;)<br>指定要修改的文件<br>Alter DataBase database_name<br>Modify File(Name &#x3D;<br>FileName &#x3D;<br>Size &#x3D;<br>Maxsize &#x3D;<br>FileGrowth &#x3D;)<br>（2） 收缩数据库空间</p>
<p>收缩整个数据库大小<br>DBCC ShrinkDatabase<br>(DataBase_name,20)20表示20%<br>收缩指定文件大小<br>DBCC ShrinkFIle<br>(DataFIle_name,4)4表示4M<br>（3）添加和删除数据库文件</p>
<p>添加文件(和创建数据库相同)<br>ALter DataBase<br>删除文件<br>Alter DataBase database_name<br>Remove File datafile_name</p>
<h2 id="7-分离和附加数据库"><a href="#7-分离和附加数据库" class="headerlink" title="7 分离和附加数据库"></a>7 分离和附加数据库</h2><p>1）分离数据库</p>
<p>Exec sp_detach_db ‘Database_name’,’True’<br>True表示跳过更新统计信息<br>（2）附加数据库<br>Create DataBase database_name<br>ON(FIlename&#x3D;’’<br>For Attach)</p>
<h1 id="二、架构"><a href="#二、架构" class="headerlink" title="二、架构"></a>二、架构</h1><h2 id="1-概念"><a href="#1-概念" class="headerlink" title="1 概念"></a>1 概念</h2><p>是数据库下的一个逻辑命名空间，可以存放表、视图等数据库对象，是一个数据库对象的容器</p>
<h2 id="2-定义架构"><a href="#2-定义架构" class="headerlink" title="2 定义架构"></a>2 定义架构</h2><p>Create Schema schema_name Authorization user_name</p>
<h2 id="3-删除架构"><a href="#3-删除架构" class="headerlink" title="3 删除架构"></a>3 删除架构</h2><p>Drop Schema schema_name Cascade|Restrict<br>Cascade：删除架构的同时将架构中的所有架构对象一起全部删除<br>Restrict：如果被删除的架构中包含架构对象，则拒绝删除</p>
<h1 id="三、分区表"><a href="#三、分区表" class="headerlink" title="三、分区表"></a>三、分区表</h1><h2 id="1-概念-1"><a href="#1-概念-1" class="headerlink" title="1 概念"></a>1 概念</h2><p>是将表中的数据按水平方式划分成不同的子集，这些数据子集存储在数据库的一个或多个文件组中。使用分区可以快速且有效地管理和访问数据子集，从而使大型表或索引更易于管理</p>
<h2 id="2-创建分区表"><a href="#2-创建分区表" class="headerlink" title="2 创建分区表"></a>2 创建分区表</h2><p>（1）条件</p>
<p>如果表中有大量的数据都是经常使用的数据，而且她们的操作方式基本一样的，则最好不要使用分区表<br>如果数据量大，而且数据是分段的，并且对不同段的数据使用的操作不同，则适用于使用分区表<br>（2）步骤<br>创建分区函数<br>Create Partition Function partition_function_name(input_type)<br>AS Range [ Left |Right] For Values(1,100,1000)<br>1<br>2<br>最后的数值表示分区指定边界值，表示四个分区</p>
<p>创建分区方案<br>Create Partition Schema partition_schema_name As Partition partition_function_name [All] To (test1fg,test2fg,test3fg,test4fg)<br>1<br>使用分区方案创建表<br>Create Partition Function myRangePF1(int)<br>AS Range Left For Values(1,100,1000)<br>Go<br>Create Partition Schema myRangePS1 As Partition myRangePF1 To (test1fg,test2fg,test3fg,test4fg)<br>GO<br>Create Table PartitionTable(<br>coll int,<br>col2 char(10))<br>ON myRangePS1(col1);</p>
<h1 id="四、索引"><a href="#四、索引" class="headerlink" title="四、索引"></a>四、索引</h1><h2 id="1-创建索引"><a href="#1-创建索引" class="headerlink" title="1 创建索引"></a>1 创建索引</h2><p>Create [Unique][Clustered |NonClustered ] INDEX index_name<br>ON<br>[Include ]指定要添加到非聚集索引叶级别的非键列<br>[Where]<br>[ON {partition_shema_name}指定分区方案{filegroup_name}]为指定文件组创建索引</p>
<p>举例<br>（1）创建非聚集索引，要求索引键值Cname升序，CardID降序排序</p>
<p>Create Index Comp_index ON Table_customer(Cname ASC,CardID DESC)<br>1<br>（2）创建分区索引，在TransHistory表和ReferOrderID列上为现有分区方案TransactionsPS1创建非聚集分区索引</p>
<p>Create NonClustered INDEX index_name<br>ON TransHistory(RefreOrderID)<br>ON TransactionsPS1(TransactionDate);</p>
<h2 id="2-删除索引"><a href="#2-删除索引" class="headerlink" title="2 删除索引"></a>2 删除索引</h2><p>Drop INDEX Index_name</p>
<h1 id="五、索引视图"><a href="#五、索引视图" class="headerlink" title="五、索引视图"></a>五、索引视图</h1><h2 id="1-基本概念"><a href="#1-基本概念" class="headerlink" title="1 基本概念"></a>1 基本概念</h2><p>标准视图也成虚拟表，因为这种视图所返回的结果集的格式与基本表基本相同，都是由列和行组成，而且在SQL语句中索引视图的方式也与索引基本表的方式相同。标准视图的结果集并不永久地存储在数据库中，每次通过标准视图查询数据时，数据库管理系统都会在内部将视图的定义替换为对基本表的查询语句，然后再对基本表进行查询</p>
<h2 id="2-适合建立索引视图的场合"><a href="#2-适合建立索引视图的场合" class="headerlink" title="2 适合建立索引视图的场合"></a>2 适合建立索引视图的场合</h2><pre><code>如果很少更新基础数据，则索引视图的效果最佳
如果经常更新基础数据，则维护索引视图的成本可能超过使用索引视图带来的性能收益
如果基础数据以批处理的形式定期更新，但是在更新之间主要作为只读数据进行处理，可考虑在更新前删除所有索引视图，然后再重建索引视图，这样做可以提高更新的性能
处理大量行的连接和聚合操作
许多查询经常执行的链接和聚合操作
</code></pre>
<h2 id="3-定义索引视图"><a href="#3-定义索引视图" class="headerlink" title="3 定义索引视图"></a>3 定义索引视图</h2><pre><code>基本要求
    定义索引视图时，视图不能引用任何其他视图，只能引用索引表
    视图引用的所有基本表必须与视图位于位于同一个数据库中，并且所有者也与视图相同
    必须使用SchemaBinding选项创建视图
    视图中的表达式引用的所有函数必须是确定的
    对视图创建的第一个索引必须是唯一聚集索引，之后再创建其他的非聚集索引
%定义视图
</code></pre>
<p>举例<br>首先创建一个视图，并未该视图创建一个唯一聚聚索引，然后是一个使用该索引视图查询语句</p>
<p>Create VIew Slaes,vOrders<br>With SchemaBinding<br>As<br>….<br>%定义索引视图<br>Go<br>Create Unique Clustered INDEX Idx_V1<br>ON Sales.vOrders (OrderDate,ProductID);<br>Go<br>…查询语句，不用From 索引视图</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2022-07-17T01:14:49.618Z" itemprop="datePublished">2022-07-17</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/SqlServer/' title=''>SqlServer</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-过去半年前的学习部分/2021-2022年课程/202203Python/Python第二章  random" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/posts/pythonrdom/">第某章  random 库</a>
  

      </h3>
      <div class="repo-list-description">
        
          <details ><summary>点击显/隐函数的定义与调用</summary><div class="fold-content"></div></details>
<p>时针).<br>import random<br>brandlist &#x3D; [‘华为’, ‘苹果’, ‘诺基亚’, ‘oppo’, ‘小米’]<br>random.seed(0)<br>name &#x3D; brandlist[random.randint(0, 4)]<br>print(name)</p>
<p>random.seed()<br>改变随机生成器的种子，使得每次生成的随机数相同</p>
<p>random.random()<br>生成0~1之间的随机浮点数</p>
<p>random.uniform（a, b）<br>指定范围内的随机浮点数</p>
<p>random.randint(a, b)<br>[a, b]内的随机整数</p>
<p>random.randrange(start, stop, step)<br>有梯度的序列中随机取一个随机数</p>
<p>random.shuffle()<br>打乱列表<br>————————————————<br>版权声明：本文为CSDN博主「我是小杨我就这样」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44478378/article/details/105136685">https://blog.csdn.net/weixin_44478378/article/details/105136685</a></p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2022-07-07T10:05:43.706Z" itemprop="datePublished">2022-07-07</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Python/' title=''>Python</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-过去半年前的学习部分/2021-2022年课程/202203Python/Python第一章  " class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/posts/py01/">第一章  程序基本结构</a>
  

      </h3>
      <div class="repo-list-description">
        
          <p>程序的基本结构是分为顺序结构, 分支结构与循环结构这三种的.<br>关于分支结构, 为 if…elif…else 的程序解释和三目运算符.<br>关于循环结构, 会阐遍历循环 for 和无限循环 while 这两者.<br>不过在此之前, 用少量的篇幅简要地介绍下数据的类型等.
        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2022-07-07T09:43:22.039Z" itemprop="datePublished">2022-07-07</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Python/' title=''>Python</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-过去半年前的学习部分/2021-2022年课程/202203Linux/Linux1第一章  操作基础" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/posts/linux01/">第一章  操作基础</a>
  

      </h3>
      <div class="repo-list-description">
        
          <p>1.请写出进入管理员账户的命令。<br>解: <code>su</code></p>
<blockquote>
<p>&lt;注&gt;在本分类中，以后均在管理员账户下进行。</p>
</blockquote>
<h2 id="1-Linux-关机方法"><a href="#1-Linux-关机方法" class="headerlink" title="1. Linux 关机方法"></a>1. Linux 关机方法</h2><p>立即关机重启: <code>shutdown -r now</code><br>立即关机: <code>shutdown -h now</code><br>设定 10 分钟后挂机, 并发送信息给登录的 Linux 用户: <code>shutdown +10 &quot;10 分钟后要关机了各位&quot;</code></p>
<h2 id="2-Linux-命令"><a href="#2-Linux-命令" class="headerlink" title="2. Linux 命令"></a>2. Linux 命令</h2><h3 id="1-pwd-命令-查看目录-x2F-文件所处位置"><a href="#1-pwd-命令-查看目录-x2F-文件所处位置" class="headerlink" title="1) pwd 命令: 查看目录&#x2F;文件所处位置"></a>1) pwd 命令: 查看目录&#x2F;文件所处位置</h3><h3 id="2-ls-ll-命令-显示当前目录下子项"><a href="#2-ls-ll-命令-显示当前目录下子项" class="headerlink" title="2) ls, ll 命令: 显示当前目录下子项"></a>2) ls, ll 命令: 显示当前目录下子项</h3><p>长列表 <code>ll</code> 所显示的 <code>drwxr-xr-x. 2 koinl koinl 6 Apr  2 04:58 Desktop</code> 按空格分隔, 依次为权限, 所含文件数, 属主, 属组, 文件大小, 修改日期, 文件名.<br>ls -a 显示隐藏目录</p>
<h3 id="3-cd-命令-改变目录"><a href="#3-cd-命令-改变目录" class="headerlink" title="3) cd 命令: 改变目录"></a>3) cd 命令: 改变目录</h3><h3 id="touch-命令-创建文件"><a href="#touch-命令-创建文件" class="headerlink" title="touch 命令: 创建文件"></a>touch 命令: 创建文件</h3><h3 id="4-mkdir-命令-创建目录"><a href="#4-mkdir-命令-创建目录" class="headerlink" title="4) mkdir 命令: 创建目录"></a>4) mkdir 命令: 创建目录</h3><p>3.请分别写出创建目录file1、集联创建目录&#x2F;file2&#x2F;test2、创建目录file3的同时给用户、组以及其他人均赋予读写权限的命令。<br>解: <code>mkdir file1; mkdir -p file2/test2; mkdir -m 666 file3</code></p>
<h3 id="5-cp-命令-复制目录或文件"><a href="#5-cp-命令-复制目录或文件" class="headerlink" title="5) cp 命令: 复制目录或文件"></a>5) cp 命令: 复制目录或文件</h3><p>选项 -r 目录添加<br>cp 源文件 目录文件<br>7.请写出将第（1）题所创建的目录file1复制到目录file2中的命令。<br>解:<code>cp -r file1 file2</code></p>
<h3 id="6-mv-命令-移动-x2F-改名-目录或文件"><a href="#6-mv-命令-移动-x2F-改名-目录或文件" class="headerlink" title="6) mv 命令: 移动 &#x2F; 改名 目录或文件"></a>6) mv 命令: 移动 &#x2F; 改名 目录或文件</h3><p>8.请写出将第（1）题所创建的目录file2移动到目录file3中的命令。<br> 解:<code>mv file2 file3</code></p>
<h3 id="7-rm-命令-删除目录或文件"><a href="#7-rm-命令-删除目录或文件" class="headerlink" title="7) rm 命令: 删除目录或文件"></a>7) rm 命令: 删除目录或文件</h3><p>选项 -r 目录添加</p>
<h3 id="8-vi-m-命令-文本编辑器"><a href="#8-vi-m-命令-文本编辑器" class="headerlink" title="8) vi(m) 命令: 文本编辑器"></a>8) vi(m) 命令: 文本编辑器</h3><p>1.使用vim 编辑器创建文件num并在文件中写入如下内容：<br>apple<br>student<br>no<br>Yes<br>解: vi num 添加</p>
<p>2.请写出统计文件num中单词数、行数以及字符数的命令。<br>解: <code>wc num</code>, 结果 4 4 21 num; 表示单词 4 个, 行数 4 个, 字节数 21 个. </p>
<p>2.5.查看文件.<br>解: <code>cat num</code>.</p>
<p>3.请写出将num中单词数、行数以及字符数重定向到文件num1中的命令。<br>解: <code>wc num&gt;num2</code>, -wlc 也可以加, 分别表示单词行与字节, 字符可用用m</p>
<p>4.请写出将num中单词数、行数以及字符数追加到文件num2中的命令。<br>解: <code>wc num&gt;&gt;num2</code></p>
<p>5.请写出创建文件&#x2F;num3,并写出查找&#x2F;num3的命令。<br>解: 创建文件:  <code>touch /num3</code>, 查找文件: <code>find / -name /num3</code></p>
<p>使用该行代码后会进入全屏幕文本编辑器中,<br>按 e 进入编辑模式, 待编辑完成后,<br>按 esc 退出该模式, :wq! 含义是: 强制 (! ) 保存 (w) 退出 (q) , 可拆卸</p>
<h3 id="9-tar"><a href="#9-tar" class="headerlink" title="9) tar"></a>9) tar</h3><p>gzip hello.txt<br>-d 解压缩</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[koinl@localhost Public]$ ls</span><br><span class="line">hello.txt  images</span><br><span class="line">[koinl@localhost Public]$ gzip hello.txt    # 对其本体进行压缩</span><br><span class="line">[koinl@localhost Public]$ ls</span><br><span class="line">hello.txt.gz  images</span><br><span class="line">[koinl@localhost Public]$ gzip -d hello.txt.gz</span><br><span class="line">[koinl@localhost Public]$ ls</span><br><span class="line">hello.txt  images</span><br><span class="line">[koinl@localhost Public]$ gzip -c hello.txt &gt; hello.txt.gz</span><br><span class="line">[koinl@localhost Public]$ ls</span><br><span class="line">hello.txt  hello.txt.gz  images</span><br><span class="line">[koinl@localhost Public]$ gzip -c -d hello.txt.gz &gt; hello-gzip.txt</span><br><span class="line">[koinl@localhost Public]$ ls</span><br><span class="line">hello-gzip.txt  hello.txt  hello.txt.gz  images</span><br></pre></td></tr></table></figure>


<h3 id="10-chmod-命令-修改权限"><a href="#10-chmod-命令-修改权限" class="headerlink" title="10) chmod 命令: 修改权限"></a>10) chmod 命令: 修改权限</h3><p>（2）为文件file设置权限，使其他用户对此文件可以进行写操作。<br>解: 设置其他用户的写权限: <code>chmod o+w file</code><br>（3）用数字设定法为file文件设置权限，所有者可读、可写、可执行，所属组只有读和执行的权限，其他用户没有权限。<br>解: 自己全操作, 组和他人读与执行: <code>chmod 750 file</code></p>
<p>（2）把目录test及其下所有文件的所有者改为om,所属组改为student。</p>
<p>chown om test    # 改变 test 的属主为 om<br>chgrp student test1<br>chown -R om:student test</p>
<p>8.请写出查看当前系统时间的命令，并将当前时间修改为”20220501 18:25:25”<br>解: 查看时间: <code>date</code>. 修改时间: <code>date -s &quot;2022-05-01 18:25:25&quot;</code></p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2022-07-06T08:18:20.447Z" itemprop="datePublished">2022-07-06</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Linux/' title=''>Linux</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
        </div>
        <div class="column one-third">
          <!--处理未安装 search 插件 默认 Google 搜索-->
 

<h3>Search</h3>

<div id="site_search">

	<!-- Google -->
	
		<form action="http://www.google.com/search?" data-site="">
	    	<input type="text" id="search_box" name="q" placeholder="Search">
	    	<button type="button" class="btn btn-default" id="site_search_do"><span class="octicon octicon-search"></span></button>
	    </form>
	

	<!-- 本地搜索 -->
	

</div>

<h3>Popular Repositories</h3>
    <div class="popular-container"></div>
    
    <script type="text/template" id="popular-list-template">
        <a href="{%=clone_url%}" class="card text-center" target="_blank">
            <div class="thumbnail">
                <div class="card-image geopattern" data-pattern-id="{%=name%}">
                    <div class="card-image-cell">
                        <h3 class="card-title">
                            {%=name%}
                        </h3>
                    </div>
                </div>
                <div class="caption">
                    <div class="card-description">
                        <p class="card-text">
                            {%=description%}
                        </p>
                    </div>
                    <div class="card-text">
                        <span class="meta-info tooltipped tooltipped-n" aria-label="{%=stargazers_count%} stars">
                            <span class="octicon octicon-star"></span> {%=stargazers_count%}
                        </span>
                        <span class="meta-info tooltipped tooltipped-n" aria-label="{%=forks_count%} forks">
                            <span class="octicon octicon-git-branch"></span> {%=forks_count%}
                        </span>
                        <span class="meta-info tooltipped tooltipped-n" aria-label="最后更新时间：{%=updated_at%}">
                            <span class="octicon octicon-clock"></span>
                            <time datetime="{%=updated_at%}">{%=updated_at%}</time>
                        </span>
                    </div>
                </div>
            </div>
        </a>
    </script>

    
<script src="/js/baiduTemplate.js"></script>

    <script type="text/javascript">
        var popular_repos = function(){

            var baiduTpl = new Object();

            var handleTpl = function(){
                baiduTpl.popular_list = baidu.template("popular-list-template");
            };

            var handleGithub = function(){
                var popularContainer = $(".popular-container");

                var repos = "hexo-theme-primer".split(",");
                for(var i in repos){
                    var name = repos[i];
                    $.get("https://api.github.com/repos/yumemor/"+name,handle);
                }

                function handle(result){
                    result.updated_at = result.updated_at.split("T")[0];
                    if(result){
                        var html = baiduTpl.popular_list(result);
                        popularContainer.append(html);
                        $(".geopattern").each(function(){           
                            $(this).geopattern($(this).data('pattern-id'));
                        });
                    }
                }
            };

            return {
                init:function(){
                    handleTpl();
                    handleGithub();
                }
            }
        }; 
        $(popular_repos().init);
    </script>

        </div>
    </div>

    
      <div class="pagination text-align">
          <div class="btn-group">
              <a class="extend prev" rel="prev" href="/archives/2022/07/page/2/">&amp;laquo;</a><a class="page-number" href="/archives/2022/07/">1</a><a class="page-number" href="/archives/2022/07/page/2/">2</a><span class="page-number current">3</span>
          </div>
      </div>
    
</section>

<footer class="container">
    <div class="site-footer" role="contentinfo">
        <div class="copyright left mobile-block">
                © 2016
                <span title="yumemor">yumemor</span>
                <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a>
        </div>

        <ul class="site-footer-links right mobile-hidden">
            <li>
                <a href="javascript:window.scrollTo(0,0)" >TOP</a>
            </li>
        </ul>

        <a href="https://github.com/yumemor/hexo-theme-primer" target="_blank" aria-label="view source code">
            <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
        </a>

        <ul class="site-footer-links mobile-hidden">
            
                  
                  <li>
                    <a href="/"  title="Home">Home</a>
                  </li>
            
                  
                  <li>
                    <a href="/categories/"  title="Category">Category</a>
                  </li>
            
                  
                  <li>
                    <a href="/open-source/"  title="Open-Source">Open-Source</a>
                  </li>
            
                  
                  <li>
                    <a href="/message/"  title="Message">Message</a>
                  </li>
            
            <li>
                <a href="/atom.xml">
                    <span class="octicon octicon-rss" style="color:orange;"></span>
                </a>
            </li>
        </ul>
    </div>
</footer>

		
<script src="/js/geopattern.js"></script>

		
<script src="/js/highlight.pack.js"></script>

		
<script src="/lib/fancybox/jquery.fancybox-1.3.4.pack.js"></script>


		

		
<script src="/js/index.js"></script>


		 
<script src="/js/popular_repo.js"></script>
 

	</body>
</html>